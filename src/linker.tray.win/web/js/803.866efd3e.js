"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[803],{3363:function(e,t,n){n.d(t,{EQ:function(){return r},QI:function(){return u},ZK:function(){return l},gv:function(){return i}});var a=n(4);const u=e=>(0,a.zG)("access/GetAccesss",e),l=e=>(0,a.zG)("access/SetAccess",e),r=()=>(0,a.zG)("access/refresh"),i=e=>(0,a.zG)("access/SetApiPassword",e)},4921:function(e,t,n){n.d(t,{B8:function(){return c},Qj:function(){return u},iN:function(){return s},mb:function(){return r},xy:function(){return i},zq:function(){return l}});var a=n(4);const u=()=>(0,a.zG)("flow/GetFlows"),l=()=>(0,a.zG)("flow/GetMessengerFlows"),r=e=>(0,a.zG)("flow/GetSForwardFlows",e),i=e=>(0,a.zG)("flow/GetRelayFlows",e),c=()=>(0,a.zG)("flow/GetCitys"),s=e=>(0,a.zG)("flow/GetStopwatch",e)},83:function(e,t,n){n.d(t,{$M:function(){return s},G7:function(){return r},KW:function(){return c},Zu:function(){return o},eh:function(){return l},r7:function(){return u},xN:function(){return i}});var a=n(4);const u=(e="0")=>(0,a.zG)("tunnel/get",e),l=()=>(0,a.zG)("tunnel/refresh"),r=()=>(0,a.zG)("tunnel/Operating"),i=e=>(0,a.zG)("tunnel/connect",e),c=e=>(0,a.zG)("tunnel/SetRouteLevel",e),s=e=>(0,a.zG)("tunnel/SetTransports",e),o=e=>(0,a.zG)("tunnel/GetNetwork",e)},920:function(e,t,n){n.d(t,{BJ:function(){return o},Ce:function(){return m},NS:function(){return r},PY:function(){return s},Tg:function(){return g},UB:function(){return v},aP:function(){return f},ir:function(){return c},lJ:function(){return l},mK:function(){return u},rL:function(){return d},y2:function(){return h},yN:function(){return i}});var a=n(4);const u=(e="0")=>(0,a.zG)("updater/get",e),l=e=>(0,a.zG)("updater/confirm",e),r=e=>(0,a.zG)("updater/exit",e),i=()=>(0,a.zG)("updater/GetSecretKey"),c=e=>(0,a.zG)("updater/SetSecretKey",e),s=e=>(0,a.zG)("updater/SetInterval",e),o=()=>(0,a.zG)("updater/getserver"),d=()=>(0,a.zG)("updater/getmsg"),h=e=>(0,a.zG)("updater/confirmserver",e),f=()=>(0,a.zG)("updater/exitserver"),v=()=>(0,a.zG)("updater/Subscribe"),m=e=>(0,a.zG)("updater/check",e),g=e=>(0,a.zG)("updater/checkkey",e)},5962:function(e,t,n){n.d(t,{Y:function(){return i},q:function(){return c}});var a=n(3363),u=n(144),l=n(6768);const r=Symbol(),i=()=>{const e=(0,u.KR)({list:{},timer:0,hashcode:0});(0,l.Gt)(r,e);const t=()=>{(0,a.EQ)()},n=()=>{clearTimeout(e.value.timer),(0,a.QI)(e.value.hashcode.toString()).then((t=>{e.value.hashcode=t.HashCode,t.List&&(e.value.list=t.List),e.value.timer=setTimeout(n,1e3)})).catch((()=>{e.value.timer=setTimeout(n,1e3)}))},i=()=>{clearTimeout(e.value.timer)};return{access:e,_getAccessInfo:n,clearAccessTimeout:i,handleAccesssRefresh:t}},c=()=>(0,l.WQ)(r)},9383:function(e,t,n){n.d(t,{T:function(){return s},d:function(){return c}});var a=n(920),u=n(3830),l=n(144),r=n(6768);const i=Symbol(),c=()=>{const e=(0,u.B)(),t=(0,l.KR)({timer:0,list:{},hashcode:0,current:{Version:"",Msg:[],DateTime:"",Status:0,Length:0,Current:0},subscribeTimer:0,device:{},show:!1});(0,r.Gt)(i,t);const n=()=>{clearTimeout(t.value.timer),(0,a.mK)(t.value.hashcode.toString()).then((a=>{if(t.value.hashcode=a.HashCode,a.List){const n=Object.values(a.List).filter((e=>!!e.Version))[0];n&&(Object.assign(t.value.current,{Version:n.Version,Status:n.Status,Length:n.Length,Current:n.Current}),e.value.updater=t.value.current),t.value.list=a.List}t.value.timer=setTimeout(n,800)})).catch((()=>{t.value.timer=setTimeout(n,800)}))},c=()=>{(0,a.UB)().then((()=>{t.value.subscribeTimer=setTimeout(c,5e3)})).catch((()=>{t.value.subscribeTimer=setTimeout(c,5e3)}))},s=()=>{clearTimeout(t.value.timer),clearTimeout(t.value.subscribeTimer)};return{updater:t,_getUpdater:n,_subscribeUpdater:c,clearUpdaterTimeout:s}},s=()=>(0,r.WQ)(i)},5559:function(e,t,n){n.d(t,{A:function(){return v}});var a=n(6768),u=n(4232);const l=e=>((0,a.Qi)("data-v-50bd4d84"),e=e(),(0,a.jt)(),e),r=l((()=>(0,a.Lk)("span",{class:"red"},"满权限(顶级管理权)",-1)));function i(e,t,n,l,i,c){const s=(0,a.g2)("el-checkbox"),o=(0,a.g2)("el-col"),d=(0,a.g2)("el-row"),h=(0,a.g2)("el-checkbox-group");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(o,{span:8},{default:(0,a.k6)((()=>[(0,a.bF)(s,{modelValue:l.state.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>l.state.checkAll=e),onChange:l.handleCheckAllChange,label:"全选",indeterminate:l.state.isIndeterminate},null,8,["modelValue","onChange","indeterminate"])])),_:1}),(0,a.bF)(o,{span:8},{default:(0,a.k6)((()=>[(0,a.bF)(s,{modelValue:l.state.full,"onUpdate:modelValue":t[1]||(t[1]=e=>l.state.full=e)},{default:(0,a.k6)((()=>[r])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a.Lk)("div",{class:"access-wrap scrollbar",style:(0,u.Tr)({height:`${l.state.height}rem`})},[(0,a.bF)(h,{modelValue:l.state.checkList,"onUpdate:modelValue":t[2]||(t[2]=e=>l.state.checkList=e),onChange:l.handleCheckedChange},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.access,((e,t)=>((0,a.uX)(),(0,a.Wv)(o,{key:t,xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(s,{value:e.Value,label:e.Text},null,8,["value","label"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue","onChange"])],4)],64)}n(4114);var c=n(144),s=n(3830),o=n(5962),d={props:["machineid","height"],setup(e){const t=(0,s.B)(),n=(0,o.q)(),u=(0,a.EW)((()=>{const e=t.value.config.Client.Accesss;return Object.keys(e).reduce(((n,a,u)=>{if(t.value.hasAccess(a)){const t=e[a];t.Key=a,n.push(t)}return n}),[])})),l=(0,c.Kh)({height:e.height||50,checkList:[t.value.config.Client.Accesss.Api.Value,t.value.config.Client.Accesss.Web.Value,t.value.config.Client.Accesss.NetManager.Value,t.value.config.Client.Accesss.FullManager.Value,t.value.config.Client.Accesss.Transport.Value,t.value.config.Client.Accesss.Action.Value,t.value.config.Client.Accesss.Group.Value],checkAll:!1,full:!1,isIndeterminate:!1}),r=()=>l.full?+(BigInt(0x10000000000000000)>>BigInt(12)).toString()-1:+l.checkList.reduce(((e,t)=>e|BigInt(t)),BigInt(0)).toString(),i=e=>{const t=e.length;l.checkAll=t===u.value.length,l.isIndeterminate=t>0&&t<u.value.length},d=e=>{l.checkAll=e,l.checkList=e?u.value.map((e=>e.Value)):[],l.isIndeterminate=!1};return(0,a.sV)((()=>{if(n&&n.value.list[e.machineid]){const t=n.value.list[e.machineid];l.checkList=u.value.reduce(((e,n)=>(+(BigInt(t)&BigInt(n.Value)).toString()==n.Value&&e.push(n.Value),e)),[])}i(l.checkList)})),{state:l,access:u,getValue:r,handleCheckAllChange:d,handleCheckedChange:i}}},h=n(1241);const f=(0,h.A)(d,[["render",i],["__scopeId","data-v-50bd4d84"]]);var v=f},7115:function(e,t,n){n.d(t,{A:function(){return b}});var a=n(6768),u=n(4232);const l=["title"],r={key:0,class:"progress"},i={key:1,class:"progress"};function c(e,t,n,c,s,o){const d=(0,a.g2)("Loading"),h=(0,a.g2)("el-icon"),f=(0,a.g2)("Download"),v=(0,a.g2)("CircleCheck"),m=(0,a.g2)("Refresh");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("a",{href:"javascript:;",class:(0,u.C4)(["download",c.updaterColor]),onClick:t[0]||(t[0]=e=>c.handleUpdate()),title:c.updaterText},[(0,a.Lk)("span",null,[(0,a.Lk)("span",null,(0,u.v_)(c.item.Version),1),c.updater.list[c.item.MachineId]?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[1==c.updater.list[c.item.MachineId].Status?((0,a.uX)(),(0,a.Wv)(h,{key:0,size:"14",class:"loading"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1})):2==c.updater.list[c.item.MachineId].Status?((0,a.uX)(),(0,a.Wv)(h,{key:1,size:"14"},{default:(0,a.k6)((()=>[(0,a.bF)(f)])),_:1})):3==c.updater.list[c.item.MachineId].Status||5==c.updater.list[c.item.MachineId].Status?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.bF)(h,{size:"14",class:"loading"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1}),0==c.updater.list[c.item.MachineId].Length?((0,a.uX)(),(0,a.CE)("span",r,"0%")):((0,a.uX)(),(0,a.CE)("span",i,(0,u.v_)(parseInt(c.updater.list[c.item.MachineId].Current/c.updater.list[c.item.MachineId].Length*100))+"%",1))],64)):6==c.updater.list[c.item.MachineId].Status?((0,a.uX)(),(0,a.Wv)(h,{key:3,size:"14",class:"yellow"},{default:(0,a.k6)((()=>[(0,a.bF)(v)])),_:1})):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.Wv)(h,{key:1,size:"14"},{default:(0,a.k6)((()=>[(0,a.bF)(f)])),_:1}))])],10,l),(0,a.Lk)("a",{href:"javascript:;",class:"download",title:"检查更新",onClick:t[1]||(t[1]=(...e)=>c.handleCheck&&c.handleCheck(...e))},[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(m)])),_:1})])],64)}var s=n(3830),o=n(144),d=n(1219),h=n(2933),f=n(2248),v=n(920),m=n(7477),g=n(9383),p={props:["item","config"],components:{Download:m.f5X,Loading:m.Rhj,CircleCheck:m.rW7,Refresh:m.C42},setup(e){const t=(0,s.B)(),n=(0,a.EW)((()=>t.value.hasAccess("UpdateSelf"))),u=((0,a.EW)((()=>t.value.hasAccess("UpdateOther"))),(0,g.T)()),l=(0,a.EW)((()=>t.value.signin.Version)),r=(0,a.EW)((()=>u.value.current.Version)),i=(0,a.EW)((()=>u.value.list[e.item.MachineId]?u.value.list[e.item.MachineId].Status<=2?e.item.Version!=l.value?`与服务器版本(${l.value})不一致，建议更新`:r.value!=e.item.Version?`不是最新版本(${r.value})，建议更新`:"是最新版本，但我无法阻止你喜欢更新":{3:"正在下载",4:"已下载",5:"正在解压",6:"已解压，请重启"}[u.value.list[e.item.MachineId].Status]:"未检测到更新")),c=(0,a.EW)((()=>e.item.Version!=l.value?"red":u.value.list[e.item.MachineId]&&r.value!=e.item.Version?"yellow":"green")),m=()=>{if(u.value.device=e.item,!e.config)return;if(!n.value)return;const t=u.value.list[e.item.MachineId];t?[0,1,3,5].indexOf(t.Status)>=0?d.nk.error("操作中，请稍后!"):6!=t.Status?u.value.show=2==t.Status:h.s.confirm("确定关闭程序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{exit(e.item.MachineId)})).catch((()=>{})):d.nk.error("未检测到更新")},p=()=>{const t=(0,o.KR)(e.item.MachineId),n=[(0,a.h)(f.P9,{label:`仅检查[${e.item.MachineName}]`,value:e.item.MachineId}),(0,a.h)(f.P9,{label:"仅检查[本组所有]",value:"g-all"})];(0,h.s)({title:"选择检查对象",message:()=>(0,a.h)(f.AV,{modelValue:t.value,placeholder:"请选择",style:"width:20rem;","onUpdate:modelValue":e=>{t.value=e}},n),confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{(0,v.Ce)(t.value==e.item.MachineId?t.value:"")})).catch((()=>{}))};return{item:(0,a.EW)((()=>e.item)),updater:u,updaterText:i,updaterColor:c,handleUpdate:m,handleCheck:p}}},k=n(1241);const C=(0,k.A)(p,[["render",c],["__scopeId","data-v-56c0e8be"]]);var b=C}}]);