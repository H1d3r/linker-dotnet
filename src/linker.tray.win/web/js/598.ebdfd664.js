"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[598],{25273:function(e,a,l){l.d(a,{A:function(){return O}});var t=l(56768),u=l(24232),o=l.p+"img/loading.6ac84aed.svg",r=l.p+"img/run.eaf54efa.svg";const n=e=>((0,t.Qi)("data-v-70ca2b5a"),e=e(),(0,t.jt)(),e),d={class:"head"},s={class:"flex"},m={class:"flex mgt-1"},i={class:"flex mgt-1"},c={class:"mgl-1"},p={class:"mgl-1"},k=n((()=>(0,t.Lk)("div",{class:"flex-1"},null,-1))),h={class:"body flex-1 relative"},v=["title"],b=["title"],w={key:0,href:"javascript:void(0);",class:"a-line mgr-1 run-btn"},F=n((()=>(0,t.Lk)("img",{src:o,alt:"run"},null,-1))),f=[F],g=["onClick"],D=n((()=>(0,t.Lk)("img",{src:r,alt:"run"},null,-1))),y=[D],_=["onClick"],V={href:"javascript:void(0);",class:"a-line"},C={class:"t-c"},$={class:"mgt-2"},T={class:"mgt-2"},I={class:"mgt-2"};function L(e,a,l,o,r,n){const F=(0,t.g2)("el-option"),D=(0,t.g2)("el-select"),L=(0,t.g2)("el-input"),R=(0,t.g2)("el-button"),S=(0,t.g2)("el-table-column"),W=(0,t.g2)("el-popconfirm"),x=(0,t.g2)("el-table"),M=(0,t.g2)("Add"),X=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",d,[(0,t.Lk)("div",s,[(0,t.Lk)("div",m,[(0,t.Lk)("div",null,[(0,t.bF)(D,{modelValue:o.state.search.Data.Type,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.search.Data.Type=e),onChange:o.loadData,size:"small",class:"mgr-1",style:{width:"9rem"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.types,((e,a)=>((0,t.uX)(),(0,t.Wv)(F,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue","onChange"])])]),(0,t.Lk)("div",i,[(0,t.Lk)("div",null,[(0,t.Lk)("span",null,(0,u.v_)(e.$t("wakeup.name"))+"/"+(0,u.v_)(e.$t("wakeup.value"))+"/"+(0,u.v_)(e.$t("wakeup.remark")),1),(0,t.bF)(L,{modelValue:o.state.search.Data.Str,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.search.Data.Str=e),onChange:o.loadData,size:"small",style:{width:"7rem"}},null,8,["modelValue","onChange"])]),(0,t.Lk)("div",c,[(0,t.bF)(R,{size:"small",loading:o.state.loading,onClick:o.loadData},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.$t("common.refresh")),1)])),_:1},8,["loading","onClick"])]),(0,t.Lk)("div",p,[(0,t.bF)(R,{type:"success",size:"small",loading:o.state.loading,onClick:a[2]||(a[2]=e=>o.handleAdd())},{default:(0,t.k6)((()=>[(0,t.eW)("+")])),_:1},8,["loading"])])]),k])]),(0,t.Lk)("div",h,[(0,t.bF)(x,{class:"firewall",stripe:"",border:"",data:o.state.data,size:"small",height:`${o.state.height}px`},{default:(0,t.k6)((()=>[(0,t.bF)(S,{prop:"Type",label:e.$t("wakeup.type"),width:"70"},{default:(0,t.k6)((a=>[(0,t.eW)((0,u.v_)(e.$t(`wakeup.type${a.row.Type}`)),1)])),_:1},8,["label"]),(0,t.bF)(S,{prop:"Name",label:e.$t("wakeup.name"),width:"100"},null,8,["label"]),(0,t.bF)(S,{prop:"Value",label:e.$t("wakeup.value")},{default:(0,t.k6)((e=>[(0,t.Lk)("div",{class:"ellipsis",title:e.row.Value},(0,u.v_)(e.row.Value),9,v)])),_:1},8,["label"]),(0,t.bF)(S,{prop:"Remark",label:e.$t("wakeup.remark"),width:"100"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",{class:"ellipsis",title:e.row.Remark},(0,u.v_)(e.row.Remark),9,b)])),_:1},8,["label"]),(0,t.bF)(S,{width:"106",fixed:"right"},{default:(0,t.k6)((a=>[(0,t.Lk)("div",null,[a.row.Running?((0,t.uX)(),(0,t.CE)("a",w,f)):((0,t.uX)(),(0,t.CE)("a",{key:1,href:"javascript:void(0);",class:"a-line mgr-1 run-btn",onClick:e=>o.handleRun(a.row)},y,8,g)),(0,t.Lk)("a",{href:"javascript:void(0);",class:"a-line mgr-1",onClick:e=>o.handleAdd(a.row)},(0,u.v_)(e.$t("wakeup.edit")),9,_),(0,t.bF)(W,{"confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("wakeup.delConfirm"),onConfirm:e=>o.handleDel(a.row)},{reference:(0,t.k6)((()=>[(0,t.Lk)("a",V,(0,u.v_)(e.$t("wakeup.del")),1)])),_:2},1032,["confirm-button-text","cancel-button-text","title","onConfirm"])])])),_:1})])),_:1},8,["data","height"])]),o.state.showAdd?((0,t.uX)(),(0,t.Wv)(M,{key:0,modelValue:o.state.showAdd,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.showAdd=e),onSuccess:o.loadData},null,8,["modelValue","onSuccess"])):(0,t.Q3)("",!0),(0,t.bF)(X,{modelValue:o.state.showSwitch,"onUpdate:modelValue":a[6]||(a[6]=e=>o.state.showSwitch=e),title:`${e.$t("wakeup.runSwitchConfirm")}【${o.state.switchRow.Name}】？`,width:"300"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",C,[(0,t.Lk)("div",$,[(0,t.bF)(R,{size:"large",onClick:a[4]||(a[4]=e=>o.handleSwitchMs(1e4))},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.$t("wakeup.runSwitchLong"))+"10000ms",1)])),_:1})]),(0,t.Lk)("div",T,[(0,t.bF)(R,{size:"large",type:"success",onClick:a[5]||(a[5]=e=>o.handleSwitchMs(1e3))},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.$t("wakeup.runSwitchTouch"))+"1000ms",1)])),_:1})]),(0,t.Lk)("div",I,[(0,t.bF)(R,{size:"large",type:"info",onClick:o.handleSwitchCustom},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.$t("wakeup.runSwitchCustom")),1)])),_:1},8,["onClick"])])])])),_:1},8,["modelValue","title"])],64)}var R=l(90144),S=l(53830),W=l(10004);const x=e=>(0,W.zG)("wakeup/get",e),M=e=>(0,W.zG)("wakeup/add",e),X=e=>(0,W.zG)("wakeup/remove",e),A=e=>(0,W.zG)("wakeup/send",e),z=()=>(0,W.zG)("wakeup/comnames"),E=()=>(0,W.zG)("wakeup/hidids");var N=l(35931);const U={class:"t-c w-100"};function K(e,a,l,o,r,n){const d=(0,t.g2)("el-input"),s=(0,t.g2)("el-col"),m=(0,t.g2)("el-row"),i=(0,t.g2)("el-form-item"),c=(0,t.g2)("el-option"),p=(0,t.g2)("el-select"),k=(0,t.g2)("el-button"),h=(0,t.g2)("el-form"),v=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(v,{class:"options-center",title:e.$t("wakeup.rule"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":a[9]||(a[9]=e=>o.state.show=e),width:"50rem",top:"2vh"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(h,{ref:"ruleFormRef",model:o.state.ruleForm.Data,rules:o.state.rules,"label-width":"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{label:e.$t("wakeup.name"),prop:"Name"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"w-100"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.state.ruleForm.Data.Name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.state.ruleForm.Data.Name=e),maxlength:"32","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,t.bF)(s,{span:12})])),_:1})])),_:1},8,["label"]),(0,t.bF)(i),(0,t.bF)(i,{label:e.$t("wakeup.type"),prop:"Type"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"w-100"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.state.ruleForm.Data.Type,"onUpdate:modelValue":a[1]||(a[1]=e=>o.state.ruleForm.Data.Type=e),onChange:o.handleTypeChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.types,((e,a)=>((0,t.uX)(),(0,t.Wv)(c,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(s,{span:12})])),_:1})])),_:1},8,["label"]),1==o.state.ruleForm.Data.Type?((0,t.uX)(),(0,t.Wv)(i,{key:0,label:e.$t("wakeup.valueMac"),prop:"value1"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"w-100"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.state.ruleForm.Data.value1,"onUpdate:modelValue":a[2]||(a[2]=e=>o.state.ruleForm.Data.value1=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(s,{span:12})])),_:1})])),_:1},8,["label"])):(0,t.Q3)("",!0),2==o.state.ruleForm.Data.Type?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(i,{label:e.$t("wakeup.valueCom"),prop:"value2"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"w-100"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.state.ruleForm.Data.value2,"onUpdate:modelValue":a[3]||(a[3]=e=>o.state.ruleForm.Data.value2=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.coms,((e,a)=>((0,t.uX)(),(0,t.Wv)(c,{value:e,label:e},null,8,["value","label"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(s,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(i,{label:e.$t("wakeup.road"),prop:"road"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.state.ruleForm.Data.road,"onUpdate:modelValue":a[4]||(a[4]=e=>o.state.ruleForm.Data.road=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1})])),_:1},8,["label"]),(0,t.bF)(i,{label:" "},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.$t("wakeup.valueComText")),1)])),_:1})],64)):(0,t.Q3)("",!0),4==o.state.ruleForm.Data.Type?((0,t.uX)(),(0,t.CE)(t.FK,{key:2},[(0,t.bF)(i,{label:e.$t("wakeup.valueHid"),prop:"value4"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"w-100"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.state.ruleForm.Data.value4,"onUpdate:modelValue":a[5]||(a[5]=e=>o.state.ruleForm.Data.value4=e),filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.state.hids,((e,a)=>((0,t.uX)(),(0,t.Wv)(c,{value:e,label:e},null,8,["value","label"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(s,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(i,{label:e.$t("wakeup.road"),prop:"road"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.state.ruleForm.Data.road,"onUpdate:modelValue":a[6]||(a[6]=e=>o.state.ruleForm.Data.road=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1})])),_:1},8,["label"]),(0,t.bF)(i,{label:" "},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.$t("wakeup.valueHidText")),1)])),_:1})],64)):(0,t.Q3)("",!0),(0,t.bF)(i),(0,t.bF)(i,{label:e.$t("wakeup.remark"),prop:"Remark"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.state.ruleForm.Data.Remark,"onUpdate:modelValue":a[7]||(a[7]=e=>o.state.ruleForm.Data.Remark=e),maxlength:"64","show-word-limit":""},null,8,["modelValue"])])),_:1},8,["label"]),(0,t.bF)(i,{label:"",prop:"Btns"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",U,[(0,t.bF)(k,{onClick:a[8]||(a[8]=e=>o.state.show=!1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.$t("common.cancel")),1)])),_:1}),(0,t.bF)(k,{type:"primary",onClick:o.handleSave},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["title","modelValue"])}var B=l(51219),G={props:["modelValue"],emits:["update:modelValue","success"],setup(e,{emit:a}){const{t:l}=(0,N.s9)(),u=(0,t.WQ)("add"),o=(0,R.Kh)({show:!0,loading:!1,ruleForm:{MachineId:u.value.MachineId,Data:{Id:u.value.Data.Id,Type:u.value.Data.Type,Name:u.value.Data.Name,Value:u.value.Data.Value,Remark:u.value.Data.Remark,value1:1==u.value.Data.Type?u.value.Data.Value:"",value2:2==u.value.Data.Type?u.value.Data.Value:"",value4:4==u.value.Data.Type?u.value.Data.Value:"",road:u.value.Data.Content||"1"}},rules:{Name:[{required:!0,message:"required",trigger:"blur"}],value1:[{validator:(e,a,l)=>{1==o.ruleForm.Data.Type?e.pattern.test(a)?l():l(new Error("failed")):l()},pattern:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,trigger:"blur"}],value2:[{validator:(e,a,l)=>{2!=o.ruleForm.Data.Type||a?l():l(new Error("failed"))},trigger:"blur"}],value4:[{validator:(e,a,l)=>{4!=o.ruleForm.Data.Type||a?l():l(new Error("failed"))},trigger:"blur"}],road:[{validator:(e,a,l)=>{2==o.ruleForm.Data.Type||4==o.ruleForm.Data.Type?e.pattern.test(a)?l():l(new Error("failed")):l()},pattern:/^[0-9]{1,}$/,trigger:"blur"}]},coms:[],hids:[],types:[{label:l("wakeup.typeWol"),value:1},{label:l("wakeup.typeCom"),value:2},{label:l("wakeup.typeHid"),value:4}]});(0,t.wB)((()=>o.show),(e=>{e||setTimeout((()=>{a("update:modelValue",e)}),300)}));const r=(0,R.KR)(null),n=()=>{r.value.validate((e=>{if(!e)return;const t={MachineId:o.ruleForm.MachineId,Data:{Id:o.ruleForm.Data.Id,Name:o.ruleForm.Data.Name.replace(/^\s|\s$/g,""),Type:o.ruleForm.Data.Type,Value:o.ruleForm.Data[`value${o.ruleForm.Data.Type}`].replace(/^\s|\s$/g,""),Remark:(o.ruleForm.Data.Remark||"").replace(/^\s|\s$/g,""),Content:2==o.ruleForm.Data.Type||4==o.ruleForm.Data.Type?o.ruleForm.Data.road:""}};M(t).then((()=>{B.nk.success(l("common.oper")),o.show=!1,a("success")})).catch((()=>{B.nk.error(l("common.operFail"))}))}))},d=()=>{o.ruleForm.Data.road={1:"",2:"1",4:"1"}[o.ruleForm.Data.Type]};return(0,t.sV)((()=>{z().then((e=>{o.coms=e,!o.ruleForm.Data.value2&&e.length>0&&(o.ruleForm.Data.value2=e[0])})).catch((()=>{})),E().then((e=>{o.hids=e,!o.ruleForm.Data.value4&&e.length>0&&(o.ruleForm.Data.value4=e[0])})).catch((()=>{}))})),{state:o,ruleFormRef:r,handleSave:n,handleTypeChange:d}}},Q=l(71241);const j=(0,Q.A)(G,[["render",K],["__scopeId","data-v-4313e898"]]);var H=j,q=l(12933),P={props:["machineId","machineName"],components:{Add:H},setup(e,{emit:a}){const{t:l}=(0,N.s9)(),u=(0,S.B)(),o=(0,R.Kh)({loading:!0,search:{MachineId:e.machineId||u.value.config.Client.Id,Data:{Str:"",Type:7}},types:[{label:l("wakeup.typeall"),value:7},{label:l("wakeup.typeWol"),value:1},{label:l("wakeup.typeCom"),value:2},{label:l("wakeup.typeHid"),value:4}],data:[],height:(0,R.EW)((()=>u.value.height-140)),showAdd:!1,showSwitch:!1,switchRow:{}}),r=()=>{o.loading=!0,x(o.search).then((e=>{o.loading=!1,o.data=e})).catch((e=>{console.log(e),o.loading=!1}))},n=e=>{o.loading=!0,X({MachineId:o.search.MachineId,Id:e.Id}).then((()=>{r(),o.loading=!1})).catch((()=>{o.loading=!1}))},d=e=>{1==e.Type?q.s.confirm(`${l("wakeup.runWolConfirm")}【${e.Name}】？`,l("common.tips"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),type:"warning"}).then((()=>{s(e,0)})).catch((()=>{})):2!=e.Type&&4!=e.Type||(o.switchRow=e,o.showSwitch=!0)},s=(e,a)=>{A({MachineId:o.search.MachineId,Data:{Id:e.Id,Value:e.Value,Content:e.Content,Type:e.Type,Ms:a}}).then((e=>{B.nk.success(l("common.oper")),o.showSwitch=!1})).catch((()=>{B.nk.success(l("common.operFail"))}))},m=e=>{s(o.switchRow,e)},i=()=>{q.s.prompt(`${l("wakeup.runSwitchCustom")}ms`,l("common.tips"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),inputPattern:/^[1-9]{1,}\d{0,}$/,inputValue:"1000"}).then((({value:e})=>{s(o.switchRow,+e)})).catch((()=>{}))},c=(0,R.KR)({});(0,t.Gt)("add",c);const p=e=>{c.value={MachineId:o.search.MachineId,Data:e||{Id:"",Type:1,Name:"",Value:"",Remark:""}},o.showAdd=!0};return(0,t.sV)((()=>{r()})),{state:o,loadData:r,handleAdd:p,handleDel:n,handleRun:d,handleSend:s,handleSwitchMs:m,handleSwitchCustom:i}}};const J=(0,Q.A)(P,[["render",L],["__scopeId","data-v-70ca2b5a"]]);var O=J}}]);