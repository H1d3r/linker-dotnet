"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[844],{5096:function(e,t,a){a.d(t,{A:function(){return p}});var l=a(6768);const o=e=>((0,l.Qi)("data-v-4892cd3c"),e=e(),(0,l.jt)(),e),s=o((()=>(0,l.Lk)("input",{type:"file",id:"file-input"},null,-1)));function n(e,t,a,o,n,r){const i=(0,l.g2)("PictureRounded"),d=(0,l.g2)("el-icon");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>o.handleBg&&o.handleBg(...e))},[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1})]),s],64)}var r=a(7477),i=a(2933),d={components:{PictureRounded:r.syp},props:["name"],setup(e){const t=`bg-${e.name}`,a=()=>{localStorage.getItem(t)?i.s.confirm("清除背景？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{s()})).catch((()=>{})):document.getElementById("file-input").click()},o=e=>{const t=e.target.files[0];if(t)try{const e=new FileReader;e.onload=function(e){s(e.target.result)},e.readAsDataURL(t)}catch(a){}e.target.value=""},s=e=>{e?(document.body.className="sunny",localStorage.setItem(t,e),document.body.style=`background-image:url(${e})`):(document.body.className="",document.body.style="",localStorage.setItem(t,""))};return(0,l.sV)((()=>{document.getElementById("file-input").addEventListener("change",o),s(localStorage.getItem(t))})),{handleBg:a}}},u=a(1241);const c=(0,u.A)(d,[["render",n],["__scopeId","data-v-4892cd3c"]]);var p=c},9808:function(e,t,a){a.d(t,{A:function(){return xt}});var l=a(6768),o=a(4232),s=a.p+"img/dianchi.2949547b.svg",n=a.p+"img/qr.a05c5f6e.jpg";const r=e=>((0,l.Qi)("data-v-ab734c72"),e=e(),(0,l.jt)(),e),i={class:"status-wrap flex"},d={class:"copy flex"},u=["title"],c=r((()=>(0,l.Lk)("img",{src:s,alt:"memory"},null,-1))),p={href:"javascript:;"},m={key:0,href:"https://github.com/snltty/linker",target:"_blank"},g={key:1,href:"https://linker.snltty.com",target:"_blank"},v={key:2,href:"https://linker-doc.snltty.com",target:"_blank"},f={key:3,href:"https://v.netzo123.com",target:"_blank"},h=r((()=>(0,l.Lk)("div",{class:"flex-1"},null,-1))),w={class:"export"},k={key:0,class:"api"},b={class:"server"},y=r((()=>(0,l.Lk)("div",{class:"pay"},[(0,l.Lk)("img",{src:n,alt:""})],-1)));function S(e,t,a,s,n,r){const S=(0,l.g2)("Export"),_=(0,l.g2)("Api"),C=(0,l.g2)("Server"),F=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("div",d,[(0,l.Lk)("a",{href:"https://afdian.com/a/snltty",class:"memory",title:e.$t("status.support"),target:"_blank"},[c,(0,l.Lk)("span",null,(0,o.v_)(e.$t("status.support")),1)],8,u),(0,l.Lk)("a",p,"©linker "+(0,o.v_)(s.self.Version),1),s.globalData.isPc?((0,l.uX)(),(0,l.CE)("a",m,"Github")):(0,l.Q3)("",!0),s.globalData.isPc?((0,l.uX)(),(0,l.CE)("a",g,(0,o.v_)(e.$t("status.website")),1)):(0,l.Q3)("",!0),s.globalData.isPc?((0,l.uX)(),(0,l.CE)("a",v,(0,o.v_)(e.$t("status.doc")),1)):(0,l.Q3)("",!0),s.globalData.isPc?((0,l.uX)(),(0,l.CE)("a",f,(0,o.v_)(e.$t("status.cdkey")),1)):(0,l.Q3)("",!0)]),h,(0,l.Lk)("div",w,[(0,l.bF)(S,{config:s.config},null,8,["config"])]),s.globalData.isPc?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.bF)(_,{config:s.config},null,8,["config"])])):(0,l.Q3)("",!0),(0,l.Lk)("div",b,[(0,l.bF)(C,{config:s.config},null,8,["config"])]),(0,l.bF)(F,{modelValue:s.state.showPay,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.showPay=e),title:e.$t("status.support"),width:"400"},{default:(0,l.k6)((()=>[y])),_:1},8,["modelValue","title"])])}var _=a(144);const C={href:"javascript:;"};function F(e,t,a,s,n,r){const i=(0,l.g2)("Tools"),d=(0,l.g2)("el-icon"),u=(0,l.g2)("el-popconfirm");return s.config?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,o.C4)(["status-api-wrap",{connected:s.connected}])},[(0,l.bF)(u,{"confirm-button-text":e.$t("status.apiClear"),"cancel-button-text":e.$t("status.apiAlter"),title:e.$t("status.apiAlterConfirm"),onCancel:s.handleShow,onConfirm:s.handleResetConnect},{reference:(0,l.k6)((()=>[(0,l.Lk)("a",C,[(0,l.bF)(d,{size:"16"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),(0,l.Lk)("span",null,(0,o.v_)(e.$t("status.api")),1)])])),_:1},8,["confirm-button-text","cancel-button-text","title","onCancel","onConfirm"])],2)):(0,l.Q3)("",!0)}var B=a(3830),V=a(4),x=a(7477),$={components:{Tools:x.S0q},props:["config"],setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.api.connected)),o=()=>{localStorage.setItem("api-cache",""),sessionStorage.setItem("api-cache",""),window.location.reload()},s=()=>{(0,V.e3)(),(0,V.a1)(`ws${"https:"===window.location.protocol?"s":""}://${window.location.hostname}:12345`,"snltty")};return{config:e.config,connected:a,handleShow:s,handleResetConnect:o}}},T=a(1241);const P=(0,T.A)($,[["render",F],["__scopeId","data-v-52645186"]]);var E=P;const A={class:"status-server-wrap"};function D(e,t,a,o,s,n){const r=(0,l.g2)("ServerConfig"),i=(0,l.g2)("ServerVersion"),d=(0,l.g2)("ServerFlow");return(0,l.uX)(),(0,l.CE)("div",A,[(0,l.bF)(r,{config:o.config},null,8,["config"]),(0,l.bF)(i,{config:o.config},null,8,["config"]),o.config&&o.hasFlow?((0,l.uX)(),(0,l.Wv)(d,{key:0,config:o.config},null,8,["config"])):(0,l.Q3)("",!0)])}function I(e,t,a,s,n,r){const i=(0,l.g2)("Avatar"),d=(0,l.g2)("el-icon"),u=(0,l.g2)("ArrowDown"),c=(0,l.g2)("el-dropdown-item"),p=(0,l.g2)("el-dropdown-menu"),m=(0,l.g2)("el-dropdown"),g=(0,l.g2)("Groups");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(m,null,{dropdown:(0,l.k6)((()=>[s.hasGroup?((0,l.uX)(),(0,l.Wv)(p,{key:0},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.state.groups,(e=>((0,l.uX)(),(0,l.Wv)(c,{onClick:t=>s.handleGroupChange(e.Id)},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.Name||"未知"),1)])),_:2},1032,["onClick"])))),256)),(0,l.bF)(c,{onClick:t[0]||(t[0]=e=>s.state.showGroups=!0)},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("status.group")),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),default:(0,l.k6)((()=>[(0,l.Lk)("span",{class:(0,o.C4)(["el-dropdown-link",{connected:s.state.connected}])},[(0,l.bF)(d,{class:"left"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),(0,l.Lk)("span",null,(0,o.v_)(s.state.groupName||"未知"),1),(0,l.bF)(d,{class:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(u)])),_:1})],2)])),_:1}),s.state.showGroups?((0,l.uX)(),(0,l.Wv)(g,{key:0,modelValue:s.state.showGroups,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.showGroups=e)},null,8,["modelValue"])):(0,l.Q3)("",!0)],64)}var R=a(9299),U=a(1219),z=a(5931);const W={class:"group-wrap"},X=["onClick"],N=["onClick"],O=["onClick"],K={key:0},M={key:1},G={class:"flex"},Q=(0,l.Lk)("span",{class:"flex-1"},null,-1);function j(e,t,a,s,n,r){const i=(0,l.g2)("el-input"),d=(0,l.g2)("el-table-column"),u=(0,l.g2)("Sync"),c=(0,l.g2)("Delete"),p=(0,l.g2)("el-icon"),m=(0,l.g2)("el-button"),g=(0,l.g2)("el-popconfirm"),v=(0,l.g2)("Plus"),f=(0,l.g2)("el-table"),h=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(h,{class:"options-center",title:e.$t("status.group"),"destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",W,[(0,l.bF)(f,{stripe:"",data:s.state.list,border:"",size:"small",width:"100%",height:"70vh",onCellDblclick:s.handleCellClick},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"Name",label:e.$t("status.groupName"),width:"100"},{default:(0,l.k6)((e=>[e.row.NameEditing?((0,l.uX)(),(0,l.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t,onBlur:t=>s.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,l.uX)(),(0,l.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>s.handleEdit(e.row,"Name")},(0,o.v_)(e.row.Name||"未知"),9,X))])),_:1},8,["label"]),(0,l.bF)(d,{prop:"Id",label:"Id"},{default:(0,l.k6)((e=>[e.row.IdEditing?((0,l.uX)(),(0,l.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Id,"onUpdate:modelValue":t=>e.row.Id=t,onBlur:t=>s.handleEditBlur(e.row,"Id")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,l.uX)(),(0,l.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>s.handleEdit(e.row,"Id")},(0,o.v_)(e.row.Id),9,N))])),_:1}),(0,l.bF)(d,{prop:"Password",label:e.$t("status.groupPassword")},{default:(0,l.k6)((e=>[e.row.PasswordEditing?((0,l.uX)(),(0,l.Wv)(i,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.Password,"onUpdate:modelValue":t=>e.row.Password=t,onBlur:t=>s.handleEditBlur(e.row,"Password")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,l.uX)(),(0,l.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>s.handleEdit(e.row,"Password")},[s.globalData.isPhone?((0,l.uX)(),(0,l.CE)("span",K,"***")):((0,l.uX)(),(0,l.CE)("span",M,(0,o.v_)(e.row.Password.replace(/.{1}/g,"*")),1))],8,O))])),_:1},8,["label"]),(0,l.bF)(d,{prop:"Oper",label:e.$t("status.groupOper"),width:"110",fixed:"right"},{header:(0,l.k6)((()=>[(0,l.Lk)("div",G,[(0,l.Lk)("strong",null,(0,o.v_)(e.$t("status.groupOper")),1),Q,(0,l.bF)(u,{name:"GroupSecretKey"})])])),default:(0,l.k6)((t=>[(0,l.Lk)("div",null,[(0,l.bF)(g,{title:e.$t("status.groupDelConfirm"),onConfirm:e=>s.handleDel(t.$index)},{reference:(0,l.k6)((()=>[(0,l.bF)(m,{type:"danger",size:"small"},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})])),_:1})])),_:2},1032,["title","onConfirm"]),(0,l.bF)(m,{size:"small",onClick:e=>s.handleAdd(t.$index)},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(v)])),_:1})])),_:2},1032,["onClick"])])])),_:1},8,["label"])])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["title","modelValue"])}var Y=a(8734),q={props:["modelValue"],emits:["update:modelValue"],components:{Delete:x.epd,Plus:x.FWt,Select:x.l6P,Sync:Y.A},setup(e,{emit:t}){const{t:a}=(0,z.s9)(),o=(0,B.B)(),s=(0,_.Kh)({list:o.value.config.Client.Groups,show:!0});(0,l.wB)((()=>o.value.config.Client.Groups),(()=>{0==s.list.filter((e=>e["__editing"])).length&&(s.list=o.value.config.Client.Groups)})),(0,l.wB)((()=>s.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const n=(e,t)=>{r(e,t.property)},r=(e,t)=>{s.list.forEach((e=>{e["NameEditing"]=!1,e["IdEditing"]=!1,e["PasswordEditing"]=!1})),e[`${t}Editing`]=!0,e["__editing"]=!0},i=(e,t)=>{e[`${t}Editing`]=!1,e["__editing"]=!1,p()},d=e=>{s.list.splice(e,1),p()},u=e=>{s.list.filter((e=>""==e.Id||""==e.Name)).length>0?U.nk.error(a("status.groupValidate")):(s.list.splice(e+1,0,{Name:"",Id:"",Password:""}),p())},c=e=>{const t=s.list.slice(),l=t[e];t[e]=t[0],t[0]=l,(0,R.rd)({name:o.value.config.Client.Name,groups:t}).then((()=>{U.nk.success(a("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),U.nk.error(a("common.operFail"))}))},p=()=>{(0,R.zp)(s.list).then((()=>{U.nk.success(a("common.oper"))})).catch((e=>{console.log(e),U.nk.error(a("common.operFail"))}))};return{globalData:o,state:s,handleCellClick:n,handleEditBlur:i,handleEdit:r,handleDel:d,handleAdd:u,handleUse:c}}};const Z=(0,T.A)(q,[["render",j]]);var H=Z,J={components:{ArrowDown:x.yd$,Avatar:x.euF,Groups:H},props:["config"],setup(e){const{t:t}=(0,z.s9)(),a=(0,B.B)(),o=(0,l.EW)((()=>a.value.hasAccess("Group"))),s=(0,_.Kh)({loading:!1,connected:(0,l.EW)((()=>a.value.signin.Connected)),groupName:(0,l.EW)((()=>a.value.config.Client.Group.Name)),groups:(0,l.EW)((()=>a.value.config.Client.Groups)),showGroups:!1}),n=e=>{const t=a.value.config.Client.Groups,l=t.map(((e,t)=>(e.$index=t,e))).filter((t=>t.Id==e))[0].$index,o=t[l];t[l]=t[0],t[0]=o,r(t)},r=e=>{s.loading=!0,(0,R.rd)({Name:a.value.config.Client.Name,Groups:e}).then((()=>{s.loading=!1,s.show=!1,U.nk.success(t("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),s.loading=!1,U.nk.error(t("common.operFail"))}))};return{config:e.config,hasGroup:o,state:s,handleGroupChange:n}}};const ee=(0,T.A)(J,[["render",I],["__scopeId","data-v-33467232"]]);var te=ee;const ae={key:0,class:"flow-wrap"},le=["title"],oe=["title"],se=["title"],ne=["title"];function re(e,t,a,s,n,r){const i=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-button"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-dialog"),p=(0,l.g2)("ServerFlowMessenger"),m=(0,l.g2)("ServerFlowSForward"),g=(0,l.g2)("ServerFlowRelay"),v=(0,l.g2)("OnlineMap"),f=(0,l.g2)("OnlineAllMap");return(0,l.uX)(),(0,l.CE)(l.FK,null,[s.config?((0,l.uX)(),(0,l.CE)("div",ae,[(0,l.Lk)("p",null,[(0,l.eW)((0,o.v_)(e.$t("status.flowOnline"))+" ",1),(0,l.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=e=>s.state.showMap=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}`},(0,o.v_)(s.state.overallOnline),9,le),(0,l.Lk)("a",{href:"javascript:;",onClick:t[1]||(t[1]=e=>s.state.showAllMap=!0),title:`${e.$t("status.flowAllServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}/${e.$t("status.flowServer")}`},(0,o.v_)(s.state.serverOnline),9,oe)]),(0,l.Lk)("p",null,[(0,l.eW)((0,o.v_)(e.$t("status.flowUpload"))+" ",1),(0,l.Lk)("a",{href:"javascript:;",title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllSend")}`,onClick:t[2]||(t[2]=(...e)=>s.handleShow&&s.handleShow(...e))},(0,o.v_)(s.state.overallSendtSpeed)+"/s",9,se)]),(0,l.Lk)("p",null,[(0,l.eW)((0,o.v_)(e.$t("status.flowDownload"))+" ",1),(0,l.Lk)("a",{href:"javascript:;",title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllReceive")}`,onClick:t[3]||(t[3]=(...e)=>s.handleShow&&s.handleShow(...e))},(0,o.v_)(s.state.overallReceiveSpeed)+"/s",9,ne)])])):(0,l.Q3)("",!0),(0,l.bF)(c,{title:s.state.time,"destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[4]||(t[4]=e=>s.state.show=e),width:"640"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:s.state.list,border:"",size:"small",width:"100%"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"text",label:e.$t("status.flowType")},null,8,["label"]),(0,l.bF)(i,{prop:"sendtBytes",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.sendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"sendtSpeed",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.sendtSpeedText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveBytes",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.receiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveSpeed",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.receiveSpeedText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"oper",label:e.$t("status.flowOper"),width:"70"},{default:(0,l.k6)((t=>[t.row.detail?((0,l.uX)(),(0,l.Wv)(d,{key:0,size:"small",onClick:e=>s.handleShowDetail(t.row.id)},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("status.flowDetail")),1)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["title","modelValue"]),s.state.details.Messenger?((0,l.uX)(),(0,l.Wv)(p,{key:1,config:s.config,modelValue:s.state.details.Messenger,"onUpdate:modelValue":t[5]||(t[5]=e=>s.state.details.Messenger=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),s.state.details.SForward?((0,l.uX)(),(0,l.Wv)(m,{key:2,config:s.config,modelValue:s.state.details.SForward,"onUpdate:modelValue":t[6]||(t[6]=e=>s.state.details.SForward=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),s.state.details.Relay?((0,l.uX)(),(0,l.Wv)(g,{key:3,config:s.config,modelValue:s.state.details.Relay,"onUpdate:modelValue":t[7]||(t[7]=e=>s.state.details.Relay=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),s.state.showMap?((0,l.uX)(),(0,l.Wv)(v,{key:4,config:s.config,modelValue:s.state.showMap,"onUpdate:modelValue":t[8]||(t[8]=e=>s.state.showMap=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),s.state.showAllMap?((0,l.uX)(),(0,l.Wv)(f,{key:5,config:s.config,modelValue:s.state.showAllMap,"onUpdate:modelValue":t[9]||(t[9]=e=>s.state.showAllMap=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0)],64)}a(4114);var ie=a(4921);function de(e,t,a,s,n,r){const i=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),u=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(u,{title:e.$t("status.flowMessenger"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(d,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"id",label:"id",width:"200"}),(0,l.bF)(i,{prop:"sendtBytes",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.sendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"sendtSpeed",label:e.$t("status.flowUpload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.sendtSpeedText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveBytes",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.receiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(i,{prop:"receiveSpeed",label:e.$t("status.flowDownload"),sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.receiveSpeedText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["title","modelValue"])}var ue={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,z.s9)(),o=(0,_.Kh)({show:!0,timer:0,list:[],old:null});(0,l.wB)((()=>o.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=()=>{clearTimeout(o.timer),(0,ie.zq)().then((e=>{const t=o.old||e,l=[];for(let o in e){const s=e[o],r=t[o],i=`[${o}]${a(`status.messenger${o}`)||"unknown"}`;l.push({id:i,sendtBytes:s.SendtBytes,sendtBytesText:n(s.SendtBytes),sendtSpeed:s.SendtBytes-r.SendtBytes,sendtSpeedText:n(s.SendtBytes-r.SendtBytes),receiveBytes:s.ReceiveBytes,receiveBytesText:n(s.ReceiveBytes),receiveSpeed:s.ReceiveBytes-r.ReceiveBytes,receiveSpeedText:n(s.ReceiveBytes-r.ReceiveBytes)})}o.list=l.filter((e=>!!e.id)),o.old=e,o.timer=setTimeout(s,1e3)})).catch((e=>{o.timer=setTimeout(s,1e3)}))},n=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`};return(0,l.sV)((()=>{s()})),(0,l.hi)((()=>{clearTimeout(o.timer)})),{config:e.config,state:o}}};const ce=(0,T.A)(ue,[["render",de],["__scopeId","data-v-80718c08"]]);var pe=ce;const me={class:"head"},ge={class:"page t-c"},ve={class:"page-wrap"};function fe(e,t,a,s,n,r){const i=(0,l.g2)("el-input"),d=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(p,{title:e.$t("status.flowServerForward"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",me,[(0,l.bF)(i,{modelValue:s.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.page.Key=e),placeholder:e.$t("status.flowSearchDomainPort")},null,8,["modelValue","placeholder"])]),(0,l.bF)(u,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"Key",label:e.$t("status.flowSearchDomainPort"),width:"200"},null,8,["label"]),(0,l.bF)(d,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",ge,[(0,l.Lk)("div",ve,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var he={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,_.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=()=>{clearTimeout(a.timer),(0,ie.mb)({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:s(l.SendtBytes),ReceiveBytesText:s(l.ReceiveBytes),DiffSendtBytesText:s(l.DiffSendtBytes),DiffReceiveBytesText:s(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(o,1e3)})).catch((e=>{a.timer=setTimeout(o,1e3)}))},s=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},n=e=>{e&&(a.page.Page=e)},r=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{o()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:n,handleSort:r}}};const we=(0,T.A)(he,[["render",fe],["__scopeId","data-v-f73b7458"]]);var ke=we;const be={class:"head"},ye={class:"page t-c"},Se={class:"page-wrap"};function _e(e,t,a,s,n,r){const i=(0,l.g2)("el-input"),d=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(p,{title:e.$t("status.flowRelay"),class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",be,[(0,l.bF)(i,{modelValue:s.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.page.Key=e),placeholder:"名字搜索"},null,8,["modelValue"])]),(0,l.bF)(u,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"FromName",label:e.$t("status.flowRelaySource"),width:"120"},null,8,["label"]),(0,l.bF)(d,{prop:"ToName",label:e.$t("status.flowRelayTarget"),width:"120"},null,8,["label"]),(0,l.bF)(d,{prop:"SendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.SendtBytesText),1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"DiffSendtBytes",label:e.$t("status.flowUpload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"ReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.ReceiveBytesText),1)])),_:1},8,["label"]),(0,l.bF)(d,{prop:"DiffReceiveBytes",label:e.$t("status.flowDownload"),sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,o.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1},8,["label"])])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",ye,[(0,l.Lk)("div",Se,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["title","modelValue"])}var Ce={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,_.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const o=()=>{clearTimeout(a.timer),(0,ie.xy)({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:s(l.SendtBytes),ReceiveBytesText:s(l.ReceiveBytes),DiffSendtBytesText:s(l.DiffSendtBytes),DiffReceiveBytesText:s(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(o,1e3)})).catch((e=>{a.timer=setTimeout(o,1e3)}))},s=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},n=e=>{e&&(a.page.Page=e)},r=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{o()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:n,handleSort:r}}};const Fe=(0,T.A)(Ce,[["render",_e],["__scopeId","data-v-019c1d95"]]);var Be=Fe;const Ve=e=>((0,l.Qi)("data-v-3c0782be"),e=e(),(0,l.jt)(),e),xe=Ve((()=>(0,l.Lk)("div",{class:"map-wrap",id:"map"},null,-1)));function $e(e,t,a,o,s,n){const r=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(r,{class:"options-center",title:e.$t("status.flowOnline"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[xe])),_:1},8,["title","modelValue"])}var Le=a(83),Te={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,z.s9)(),o=(0,_.Kh)({show:!0});(0,l.wB)((()=>o.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=(e,t)=>{const l=L.map("map").setView([38,105],4);L.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:"linker",maxZoom:10}).addTo(l);for(let s=0;s<t.length;s++)try{const o=t[s];if(!e[o.MachineId])continue;const n=e[o.MachineId].Net;if(0==n.Lat||0==n.Lon)continue;const r=new L.Icon({iconSize:[18,28],iconAnchor:[9,28],shadowAnchor:[0,0],popupAnchor:[0,-27],shadowSize:[0,0],iconUrl:o.Online?"/marker-green.png":"/marker-grey.png",shadowUrl:"/marker-shadow.png"}),i=`\n                        <div class="marker-content" >\n                            <h3 class="marker-title" style="font-size:1.6rem">${o.MachineName}</h3>\n                            <div class="marker-text" style="font-size:1.3rem">${a("status.flowArea")} : ${n.CountryCode}、${n.City}</div>\n                            <div class="marker-text" style="font-size:1.3rem">${a("status.flowNet")} : ${n.Isp}</div>\n                        </div>\n                    `;new L.marker(new L.latLng([n.Lat+Math.random()/5,n.Lon+Math.random()/5]),{icon:r}).bindPopup(i,{}).on("mouseover",(function(e){this.openPopup()})).on("mouseout",(function(e){this.closePopup()})).addTo(l)}catch(o){console.log(o)}};return(0,l.sV)((()=>{(0,l.dY)((()=>{(0,Le.r7)().then((e=>{(0,R.NT)().then((t=>{s(e.List,t)})).catch((()=>{}))})).catch((()=>{}))}))})),{state:o}}};const Pe=(0,T.A)(Te,[["render",$e],["__scopeId","data-v-3c0782be"]]);var Ee=Pe;const Ae=e=>((0,l.Qi)("data-v-6f5477f6"),e=e(),(0,l.jt)(),e),De=Ae((()=>(0,l.Lk)("div",{class:"map-wrap",id:"map"},null,-1)));function Ie(e,t,a,o,s,n){const r=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(r,{class:"options-center",title:e.$t("status.flowOnline"),"destroy-on-close":"",modelValue:o.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.show=e),width:"77rem",top:"2vh"},{default:(0,l.k6)((()=>[De])),_:1},8,["title","modelValue"])}var Re={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const{t:a}=(0,z.s9)(),o=(0,_.Kh)({show:!0});(0,l.wB)((()=>o.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=e=>{const t=L.map("map").setView([38,105],4);L.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:"linker",maxZoom:10}).addTo(t);for(let a=0;a<e.length;a++){const l=e[a],o=new L.Icon({iconSize:[18,28],iconAnchor:[9,28],shadowAnchor:[0,0],popupAnchor:[0,-27],shadowSize:[0,0],iconUrl:"/marker-green.png",shadowUrl:"/marker-shadow.png"}),s=`\n                    <div class="marker-content" >\n                        <h3 class="marker-title" style="font-size:1.6rem">${l.City} ${l.Count}</h3>\n                    </div>\n                `;new L.marker(new L.latLng([l.Lat,l.Lon]),{icon:o}).bindPopup(s,{}).on("mouseover",(function(e){this.openPopup()})).on("mouseout",(function(e){this.closePopup()})).addTo(t)}};return(0,l.sV)((()=>{(0,l.dY)((()=>{(0,ie.B8)().then((e=>{s(e)})).catch((()=>{}))}))})),{state:o}}};const Ue=(0,T.A)(Re,[["render",Ie],["__scopeId","data-v-6f5477f6"]]);var ze=Ue,We={props:["config"],components:{ServerFlowMessenger:pe,ServerFlowSForward:ke,ServerFlowRelay:Be,OnlineMap:Ee,OnlineAllMap:ze},setup(e){const{t:t}=(0,z.s9)(),a=(0,B.B)(),o=(0,l.EW)((()=>a.value.hasAccess("SForwardFlow"))),s=(0,l.EW)((()=>a.value.hasAccess("RelayFlow"))),n=(0,l.EW)((()=>a.value.hasAccess("SigninFlow"))),r=(0,_.Kh)({show:!1,timer:0,overallSendtSpeed:"0000.00KB",overallReceiveSpeed:"0000.00KB",overallOnline:"0/0",serverOnline:"",time:"",list:[],old:null,details:{Messenger:!1,SForward:!1,Relay:!1},showMap:!1,showAllMap:!1}),i=()=>{r.show=!0},d=e=>{r.details[e]=!0},u={External:{text:t("status.flowWanPort"),detail:!1},RelayReport:{text:t("status.flowRelayNode"),detail:!1},Relay:{text:t("status.flowRelay"),detail:s.value},Messenger:{text:t("status.flowMessenger"),detail:n.value},SForward:{text:t("status.flowServerForward"),detail:o.value},flow:{text:"",detail:!1}},c=()=>{clearTimeout(r.timer),(0,ie.Qj)().then((e=>{const t=r.old||e;if(e.Items["_"]&&(r.overallOnline=`${e.Items["_"].SendtBytes}/${e.Items["_"].ReceiveBytes}`,delete e.Items["_"]),e.Items["flow"]&&e.Items["flow"].ReceiveBytes>0){const t=(BigInt(e.Items["flow"].ReceiveBytes)>>BigInt(32)).toString(),a=(BigInt(e.Items["flow"].ReceiveBytes)&BigInt(4294967295)).toString(),l=e.Items["flow"].SendtBytes;r.serverOnline=`、${t}/${a}/${l}`,delete e.Items["flow"]}let a=0,l=0,o=0,s=0;for(let r in t.Items)a+=t.Items[r].ReceiveBytes,l+=t.Items[r].SendtBytes;for(let r in e.Items)o+=e.Items[r].ReceiveBytes,s+=e.Items[r].SendtBytes;r.overallSendtSpeed=p(s-l),r.overallReceiveSpeed=p(o-a),r.time=`${e.Start}`;const n=[];for(let r in e.Items){const a=e.Items[r],l=t.Items[r],o=u[`${r}`]||{text:`Unknow${r}`,detail:!1};n.push({id:r,text:o.text,detail:o.detail,sendtBytes:a.SendtBytes,sendtBytesText:p(a.SendtBytes),sendtSpeed:a.SendtBytes-l.SendtBytes,sendtSpeedText:p(a.SendtBytes-l.SendtBytes),receiveBytes:a.ReceiveBytes,receiveBytesText:p(a.ReceiveBytes),receiveSpeed:a.ReceiveBytes-l.ReceiveBytes,receiveSpeedText:p(a.ReceiveBytes-l.ReceiveBytes)})}r.list=n.filter((e=>!!e.id)),r.old=e,r.timer=setTimeout(c,1e3)})).catch((e=>{r.timer=setTimeout(c,1e3)}))},p=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`};return(0,l.sV)((()=>{c()})),(0,l.hi)((()=>{clearTimeout(r.timer)})),{hasSForwardFlow:o,config:e.config,state:r,handleShow:i,handleShowDetail:d}}};const Xe=(0,T.A)(We,[["render",re],["__scopeId","data-v-12cd5250"]]);var Ne=Xe;const Oe=["title"],Ke={key:0,class:"progress"},Me={key:1,class:"progress"};function Ge(e,t,a,s,n,r){const i=(0,l.g2)("Loading"),d=(0,l.g2)("el-icon"),u=(0,l.g2)("Download"),c=(0,l.g2)("CircleCheck");return(0,l.uX)(),(0,l.CE)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>s.handleUpdate&&s.handleUpdate(...e)),class:(0,o.C4)(["download",s.updateColor()]),title:s.updateText()},[(0,l.Lk)("span",null,(0,o.v_)(s.state.version),1),s.updaterServer.Version?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[1==s.updaterServer.Status?((0,l.uX)(),(0,l.Wv)(d,{key:0,size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1})):2==s.updaterServer.Status?((0,l.uX)(),(0,l.Wv)(d,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(u)])),_:1})):3==s.updaterServer.Status||5==s.updaterServer.Status?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(d,{size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),0==s.updaterServer.Length?((0,l.uX)(),(0,l.CE)("span",Ke,"0%")):((0,l.uX)(),(0,l.CE)("span",Me,(0,o.v_)(parseInt(s.updaterServer.Current/s.updaterServer.Length*100))+"%",1))],64)):6==s.updaterServer.Status?((0,l.uX)(),(0,l.Wv)(d,{key:3,size:"14",class:"yellow"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.Wv)(d,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(u)])),_:1}))],10,Oe)}var Qe=a(2933),je=a(920),Ye={components:{Promotion:x.Yk4,Download:x.f5X,Loading:x.Rhj,CircleCheck:x.rW7,ServerFlow:Ne},props:["config"],setup(e){const{t:t}=(0,z.s9)(),a=(0,B.B)(),o=(0,l.EW)((()=>a.value.hasAccess("UpdateServer"))),s=(0,_.KR)({Version:"",Status:0,Length:0,Current:0,Msg:[],DateTime:""}),n=(0,_.Kh)({show:!1,loading:!1,connected:(0,l.EW)((()=>a.value.signin.Connected)),version:(0,l.EW)((()=>a.value.signin.Version)),timer:0}),r=()=>{clearTimeout(n.timer),(0,je.BJ)().then((e=>{s.value.Version=e.Version,s.value.Status=e.Status,s.value.Length=e.Length,s.value.Current=e.Current,s.value.Status>2&&s.value.Status<6&&(n.timer=setTimeout((()=>{r()}),1e3))})).catch((()=>{n.timer=setTimeout((()=>{r()}),1e3)}))},i=()=>s.value.Version?s.value.Status<=2?n.version!=s.value.Version?`${t("status.serverNotNew")}(${s.value.Version})`:`${t("status.serverNew")}`:{3:t("status.serverDownloading"),4:t("status.serverDownloaded"),5:t("status.serverUnZipIng"),6:t("status.serverUnZip")}[s.value.Status]:t("status.serverNoUpdate"),d=()=>n.version!=s.value.Version?"yellow":"green",u=()=>{e.config&&o.value&&([0,1,3,5].indexOf(s.value.Status)>=0?U.nk.error(t("common.operating")):6!=s.value.Status?2==s.value.Status&&Qe.s.confirm(t("status.serverConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,je.y2)(s.value.Version||a.value.signin.Version).then((()=>{setTimeout((()=>{r()}),1e3)}))})).catch((()=>{})):Qe.s.confirm(t("status.serverCloseConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,je.aP)()})).catch((()=>{})))};return(0,l.sV)((()=>{r()})),{config:e.config,state:n,updaterServer:s,handleUpdate:u,updateText:i,updateColor:d}}};const qe=(0,T.A)(Ye,[["render",Ge],["__scopeId","data-v-6baf133f"]]);var Ze=qe,He={components:{ServerConfig:te,ServerFlow:Ne,ServerVersion:Ze},props:["config"],setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.hasAccess("Flow"))),o=(0,_.Kh)({show:!1,loading:!1});return{config:e.config,hasFlow:a,state:o}}};const Je=(0,T.A)(He,[["render",D],["__scopeId","data-v-2d85a782"]]);var et=Je;const tt={key:0,class:"status-export-wrap"},at=["title"],lt={key:0},ot={class:"port-wrap"},st={class:"text"},nt={class:"body"},rt={class:"card-header"},it={class:"flex flex-nowrap"},dt={style:{width:"11rem"}},ut={class:"flex flex-nowrap"},ct={style:{width:"11rem"}},pt={class:"flex flex-nowrap mgt-1"},mt={style:{width:"11rem"}},gt={class:"flex flex-nowrap mgt-1"},vt={style:{width:"11rem"}},ft={class:"port-wrap"},ht={class:"port-wrap"},wt={style:{"margin-top":"1rem"}};function kt(e,t,a,s,n,r){const i=(0,l.g2)("Share"),d=(0,l.g2)("el-icon"),u=(0,l.g2)("el-checkbox"),c=(0,l.g2)("el-col"),p=(0,l.g2)("el-row"),m=(0,l.g2)("el-input"),g=(0,l.g2)("Access"),v=(0,l.g2)("el-card"),f=(0,l.g2)("el-button"),h=(0,l.g2)("el-dialog");return s.config&&s.hasExport?((0,l.uX)(),(0,l.CE)("div",tt,[(0,l.Lk)("a",{href:"javascript:;",title:e.$t("status.export"),onClick:t[0]||(t[0]=e=>s.state.show=!0)},[(0,l.bF)(d,{size:"16"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),s.globalData.isPc?((0,l.uX)(),(0,l.CE)("span",lt,(0,o.v_)(e.$t("status.export")),1)):(0,l.Q3)("",!0)],8,at),(0,l.bF)(h,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[13]||(t[13]=e=>s.state.show=e),center:"",width:"580",top:"1vh"},{footer:(0,l.k6)((()=>[(0,l.bF)(f,{plain:"",onClick:t[12]||(t[12]=e=>s.state.show=!1),loading:s.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("common.cancel")),1)])),_:1},8,["loading"]),(0,l.bF)(f,{type:"default",plain:"",onClick:s.handleExport,loading:s.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("status.exportDownload")),1)])),_:1},8,["onClick","loading"]),(0,l.bF)(f,{type:"info",plain:"",onClick:s.handleCopy,loading:s.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick","loading"]),(0,l.bF)(f,{type:"success",plain:"",onClick:s.handleSave,loading:s.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("status.exportSave")),1)])),_:1},8,["onClick","loading"])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",ot,[(0,l.Lk)("div",st,(0,o.v_)(e.$t("status.exportText")),1),(0,l.Lk)("div",nt,[(0,l.bF)(v,{shadow:"never"},{header:(0,l.k6)((()=>[(0,l.Lk)("div",rt,[(0,l.Lk)("div",null,[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{span:24},{default:(0,l.k6)((()=>[(0,l.bF)(u,{disabled:s.onlyNode,modelValue:s.state.single,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.single=e),label:e.$t("status.exportSingle")},null,8,["disabled","modelValue","label"])])),_:1})])),_:1})]),(0,l.Lk)("div",null,[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{span:12},{default:(0,l.k6)((()=>[(0,l.Lk)("div",it,[(0,l.Lk)("span",dt,(0,o.v_)(e.$t("status.exportName"))+" : ",1),(0,l.bF)(m,{disabled:!s.state.single,modelValue:s.state.name,"onUpdate:modelValue":t[2]||(t[2]=e=>s.state.name=e),maxlength:"32","show-word-limit":""},null,8,["disabled","modelValue"])])])),_:1}),(0,l.bF)(c,{span:12},{default:(0,l.k6)((()=>[(0,l.Lk)("div",ut,[(0,l.Lk)("span",ct,(0,o.v_)(e.$t("status.exportApiPassword"))+" : ",1),(0,l.bF)(m,{type:"password","show-password":"",disabled:s.onlyNode,modelValue:s.state.apipassword,"onUpdate:modelValue":t[3]||(t[3]=e=>s.state.apipassword=e),maxlength:"36","show-word-limit":""},null,8,["disabled","modelValue"])])])),_:1}),(0,l.bF)(c,{span:12},{default:(0,l.k6)((()=>[(0,l.Lk)("div",pt,[(0,l.Lk)("span",mt,(0,o.v_)(e.$t("status.exportWebport"))+" : ",1),(0,l.bF)(m,{disabled:s.onlyNode,modelValue:s.state.webport,"onUpdate:modelValue":t[4]||(t[4]=e=>s.state.webport=e)},null,8,["disabled","modelValue"])])])),_:1}),(0,l.bF)(c,{span:12},{default:(0,l.k6)((()=>[(0,l.Lk)("div",gt,[(0,l.Lk)("span",vt,(0,o.v_)(e.$t("status.exportApiport"))+" : ",1),(0,l.bF)(m,{disabled:s.onlyNode,modelValue:s.state.apiport,"onUpdate:modelValue":t[5]||(t[5]=e=>s.state.apiport=e)},null,8,["disabled","modelValue"])])])),_:1})])),_:1})]),(0,l.Lk)("div",null,[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:s.state.relay,"onUpdate:modelValue":t[6]||(t[6]=e=>s.state.relay=e),label:e.$t("status.exportRelay")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(c,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:s.state.sforward,"onUpdate:modelValue":t[7]||(t[7]=e=>s.state.sforward=e),label:e.$t("status.exportSForward")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(c,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:s.state.updater,"onUpdate:modelValue":t[8]||(t[8]=e=>s.state.updater=e),label:e.$t("status.exportUpdater")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(c,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:s.state.server,"onUpdate:modelValue":t[9]||(t[9]=e=>s.state.server=e),label:e.$t("status.exportServer")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(c,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:s.state.group,"onUpdate:modelValue":t[10]||(t[10]=e=>s.state.group=e),label:e.$t("status.exportGroup")},null,8,["modelValue","label"])])),_:1}),(0,l.bF)(c,{xs:12,sm:8},{default:(0,l.k6)((()=>[(0,l.bF)(u,{modelValue:s.state.tunnel,"onUpdate:modelValue":t[11]||(t[11]=e=>s.state.tunnel=e),label:e.$t("status.exportTunnel")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])),default:(0,l.k6)((()=>[(0,l.bF)(g,{ref:"accessDom",machineid:s.machineId,height:30},null,8,["machineid"])])),_:1})])])])),_:1},8,["title","modelValue"]),(0,l.bF)(h,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:s.state.showCopy,"onUpdate:modelValue":t[15]||(t[15]=e=>s.state.showCopy=e),center:"",width:"580",top:"1vh"},{footer:(0,l.k6)((()=>[(0,l.bF)(f,{plain:"",onClick:s.copyToClipboard},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",ft,[(0,l.bF)(m,{modelValue:s.state.copyContent,"onUpdate:modelValue":t[14]||(t[14]=e=>s.state.copyContent=e),type:"textarea",rows:10,resize:"none",readonly:""},null,8,["modelValue"])])])),_:1},8,["title","modelValue"]),(0,l.bF)(h,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:s.state.showSave,"onUpdate:modelValue":t[18]||(t[18]=e=>s.state.showSave=e),center:"",width:"300",top:"1vh"},{footer:(0,l.k6)((()=>[(0,l.bF)(f,{plain:"",onClick:s.copySaveToClipboard},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",ht,[(0,l.Lk)("div",null,[(0,l.bF)(m,{modelValue:s.state.saveServer,"onUpdate:modelValue":t[16]||(t[16]=e=>s.state.saveServer=e),readonly:""},null,8,["modelValue"])]),(0,l.Lk)("div",wt,[(0,l.bF)(m,{modelValue:s.state.saveContent,"onUpdate:modelValue":t[17]||(t[17]=e=>s.state.saveContent=e),readonly:""},null,8,["modelValue"])])])])),_:1},8,["title","modelValue"])])):(0,l.Q3)("",!0)}var bt=a(8835),yt=a(5559),St={components:{Share:x.SYj,Access:yt.A},props:["config"],setup(e){const{t:t}=(0,z.s9)(),a=(0,B.B)(),o=(0,l.EW)((()=>a.value.hasAccess("Export"))),s=(0,l.EW)((()=>a.value.config.Client.OnlyNode)),n=(0,l.EW)((()=>a.value.config.Client.Id)),r=(0,_.Kh)({show:!1,loading:!1,single:!0,name:"",apipassword:s.value?a.value.config.Client.CApi.ApiPassword:"",apiport:a.value.config.Client.CApi.ApiPort,webport:a.value.config.Client.CApi.WebPort,relay:!0,sforward:!0,updater:!0,server:!0,group:!0,tunnel:!0,copyContent:"",showCopy:!1,saveServer:a.value.config.Client.Server.Host,saveContent:"",showSave:!1}),i=(0,_.KR)(null),d=()=>{if(!o.value)return;const e={access:i.value.getValue(),single:r.single,name:r.name,apipassword:r.apipassword,webport:+r.webport,apiport:+r.apiport,relay:r.relay,sforward:r.sforward,updater:r.updater,server:r.server,group:r.group,tunnel:r.tunnel};if(e.single){if(!e.name)return void U.nk.error(t("status.exportNamePlease"))}else e.name="";if(e.apipassword)if(!e.webport||isNaN(e.webport)||e.webport<=0||e.webport>65535)U.nk.error(t("status.exportWebportPlease"));else{if(!(!e.apiport||isNaN(e.apiport)||e.apiport<=0||e.apiport>65535))return e;U.nk.error(t("status.exportApiportPlease"))}else U.nk.error(t("status.exportApiPasswordPlease"))},u=()=>{const e=document.createElement("a");r.single?e.download=`client-node-export-${r.name}.zip`:e.download="client-node-export.zip",e.href="/client-node-export.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)},c=()=>{const e=d();e&&(r.loading=!0,(0,bt.ql)(e).then((e=>{r.loading=!1,e?(r.show=!1,U.nk.success(t("common.oper")),r.saveContent=e,r.showSave=!0):U.nk.error(t("common.operFail"))})).catch((()=>{U.nk.error(t("common.operFail")),r.loading=!1})))},p=async()=>{try{return await navigator.clipboard.writeText(`在初始化linker客户端时，填写服务器和密钥，导入配置\n服务器: ${r.saveServer}\n密钥: ${r.saveContent}`),U.nk.success(t("common.oper")),!0}catch(e){return U.nk.error(t("common.operFail")),!1}},m=()=>{const e=d();e&&(r.loading=!0,(0,bt.P$)(e).then((()=>{r.loading=!1,r.show=!1,U.nk.success(t("common.oper")),u()})).catch((()=>{U.nk.error(t("common.operFail")),r.loading=!1})))},g=()=>{const e=d();e&&(r.loading=!0,(0,bt.om)(e).then((e=>{r.loading=!1,r.show=!1,U.nk.success(t("common.oper")),r.copyContent=e,r.showCopy=!0})).catch((()=>{U.nk.error(t("common.operFail")),r.loading=!1})))},v=async()=>{try{return await navigator.clipboard.writeText(r.copyContent),U.nk.success(t("common.oper")),!0}catch(e){return U.nk.error(t("common.operFail")),!1}};return{globalData:a,config:e.config,onlyNode:s,hasExport:o,machineId:n,state:r,accessDom:i,handleSave:c,handleExport:m,handleCopy:g,copyToClipboard:v,copySaveToClipboard:p}}};const _t=(0,T.A)(St,[["render",kt],["__scopeId","data-v-371d5ad2"]]);var Ct=_t,Ft=a(7115),Bt={components:{Api:E,Server:et,Export:Ct,UpdaterBtn:Ft.A},props:["config"],setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.self)),o=(0,_.Kh)({showPay:!1});return{globalData:t,state:o,config:e.config,self:a}}};const Vt=(0,T.A)(Bt,[["render",S],["__scopeId","data-v-ab734c72"]]);var xt=Vt},8734:function(e,t,a){a.d(t,{A:function(){return v}});var l=a(6768);function o(e,t,a,o,s,n){const r=(0,l.g2)("Share"),i=(0,l.g2)("el-icon"),d=(0,l.g2)("el-button");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(d,{class:"btn",size:"small",onClick:o.handleSync},{default:(0,l.k6)((()=>[(0,l.bF)(i,null,{default:(0,l.k6)((()=>[(0,l.bF)(r)])),_:1})])),_:1},8,["onClick"])])}var s=a(4);const n=e=>(0,s.zG)("sync/Sync",e);var r=a(3830),i=a(7477),d=a(1219),u=a(2933),c=a(5931),p={props:["name"],components:{Share:i.SYj},setup(e){const{t:t}=(0,c.s9)(),a=(0,r.B)(),o=(0,l.EW)((()=>a.value.hasAccess("Sync"))),s=()=>{o.value?u.s.confirm(`${t("server.sync")}【${t(`server.async${e.name}`)}】${t("server.asyncText")}? `,t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{n([e.name]).then((e=>{d.nk.success(t("common.oper"))}))})).catch((()=>{})):d.nk.success(t("common.access"))};return{handleSync:s}}},m=a(1241);const g=(0,m.A)(p,[["render",o]]);var v=g}}]);