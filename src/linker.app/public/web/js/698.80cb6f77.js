"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[698],{52417:function(e,t,o){o.d(t,{A:function(){return Ye}});var a=o(56768),l=o(24232),n=o.p+"img/dianchi.2949547b.svg",s=o.p+"img/qr.a05c5f6e.jpg";const r=e=>((0,a.Qi)("data-v-5a37b5dd"),e=e(),(0,a.jt)(),e),i={class:"status-wrap flex"},u={class:"copy flex"},d=["title"],c=r((()=>(0,a.Lk)("img",{src:n,alt:"memory"},null,-1))),p={href:"javascript:;"},m={key:0,href:"https://github.com/snltty/linker",target:"_blank"},g={key:1,href:"https://linker.snltty.com",target:"_blank"},v={key:2,href:"https://linker-doc.snltty.com",target:"_blank"},f={key:3,href:"https://v.netzo123.com",target:"_blank"},k=r((()=>(0,a.Lk)("div",{class:"flex-1"},null,-1))),h={class:"export"},w={key:0,class:"api"},b={class:"server"},C=r((()=>(0,a.Lk)("div",{class:"pay"},[(0,a.Lk)("img",{src:s,alt:""})],-1)));function y(e,t,o,n,s,r){const y=(0,a.g2)("Export"),_=(0,a.g2)("Api"),F=(0,a.g2)("Server"),V=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",u,[(0,a.Lk)("a",{href:"https://afdian.com/a/snltty",class:"memory",title:e.$t("status.support"),target:"_blank"},[c,(0,a.Lk)("span",null,(0,l.v_)(e.$t("status.support")),1)],8,d),(0,a.Lk)("a",p,"©linker "+(0,l.v_)(n.self.Version),1),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("a",m,"Github")):(0,a.Q3)("",!0),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("a",g,(0,l.v_)(e.$t("status.website")),1)):(0,a.Q3)("",!0),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("a",v,(0,l.v_)(e.$t("status.doc")),1)):(0,a.Q3)("",!0),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("a",f,(0,l.v_)(e.$t("status.cdkey")),1)):(0,a.Q3)("",!0)]),k,(0,a.Lk)("div",h,[(0,a.bF)(y,{config:n.config},null,8,["config"])]),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("div",w,[(0,a.bF)(_,{config:n.config},null,8,["config"])])):(0,a.Q3)("",!0),(0,a.Lk)("div",b,[(0,a.bF)(F,{config:n.config},null,8,["config"])]),(0,a.bF)(V,{modelValue:n.state.showPay,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.showPay=e),title:e.$t("status.support"),width:"400"},{default:(0,a.k6)((()=>[C])),_:1},8,["modelValue","title"])])}var _=o(90144);const F={href:"javascript:;"};function V(e,t,o,n,s,r){const i=(0,a.g2)("Tools"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("el-popconfirm");return n.config?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["status-api-wrap",{connected:n.connected}])},[(0,a.bF)(d,{"confirm-button-text":e.$t("status.apiClear"),"cancel-button-text":e.$t("status.apiAlter"),title:e.$t("status.apiAlterConfirm"),onCancel:n.handleShow,onConfirm:n.handleResetConnect},{reference:(0,a.k6)((()=>[(0,a.Lk)("a",F,[(0,a.bF)(u,{size:"16"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),(0,a.Lk)("span",null,(0,l.v_)(e.$t("status.api")),1)])])),_:1},8,["confirm-button-text","cancel-button-text","title","onCancel","onConfirm"])],2)):(0,a.Q3)("",!0)}var $=o(53830),x=o(10004),S=o(57477),E={components:{Tools:S.S0q},props:["config"],setup(e){const t=(0,$.B)(),o=(0,a.EW)((()=>t.value.api.connected)),l=()=>{localStorage.setItem("api-cache",""),sessionStorage.setItem("api-cache",""),window.location.reload()},n=()=>{(0,x.e3)(),(0,x.a1)(`ws${"https:"===window.location.protocol?"s":""}://${window.location.hostname}:12345`,"snltty")};return{config:e.config,connected:o,handleShow:n,handleResetConnect:l}}},L=o(71241);const A=(0,L.A)(E,[["render",V],["__scopeId","data-v-129a484d"]]);var W=A;const X={class:"status-server-wrap"};function U(e,t,o,l,n,s){const r=(0,a.g2)("Groups"),i=(0,a.g2)("ServerVersion"),u=(0,a.g2)("Flow");return(0,a.uX)(),(0,a.CE)("div",X,[(0,a.bF)(r,{config:l.config},null,8,["config"]),(0,a.bF)(i,{config:l.config},null,8,["config"]),l.config&&l.hasFlow?((0,a.uX)(),(0,a.Wv)(u,{key:0,config:l.config},null,8,["config"])):(0,a.Q3)("",!0)])}function P(e,t,o,n,s,r){const i=(0,a.g2)("Avatar"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("ArrowDown"),c=(0,a.g2)("el-dropdown-item"),p=(0,a.g2)("el-dropdown-menu"),m=(0,a.g2)("el-dropdown"),g=(0,a.g2)("Groups");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(m,null,{dropdown:(0,a.k6)((()=>[n.hasGroup?((0,a.uX)(),(0,a.Wv)(p,{key:0},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.state.groups,(e=>((0,a.uX)(),(0,a.Wv)(c,{onClick:t=>n.handleGroupChange(e.Id)},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.Name||"未知"),1)])),_:2},1032,["onClick"])))),256)),(0,a.bF)(c,{onClick:t[0]||(t[0]=e=>n.state.showGroups=!0)},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.group")),1)])),_:1})])),_:1})):(0,a.Q3)("",!0)])),default:(0,a.k6)((()=>[(0,a.Lk)("span",{class:(0,l.C4)(["el-dropdown-link",{connected:n.state.connected}])},[(0,a.bF)(u,{class:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),(0,a.Lk)("span",null,(0,l.v_)(n.state.groupName||"未知"),1),(0,a.bF)(u,{class:"right"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1})],2)])),_:1}),n.state.showGroups?((0,a.uX)(),(0,a.Wv)(g,{key:0,modelValue:n.state.showGroups,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.showGroups=e)},null,8,["modelValue"])):(0,a.Q3)("",!0)],64)}var I=o(69299),N=o(51219),B=o(35931);const D={class:"group-wrap"},T=["onClick"],G=["onClick"],z=["onClick"],j={key:0},Q={key:1},K={class:"flex"},O=(0,a.Lk)("span",{class:"flex-1"},null,-1);function R(e,t,o,n,s,r){const i=(0,a.g2)("el-input"),u=(0,a.g2)("el-table-column"),d=(0,a.g2)("Sync"),c=(0,a.g2)("Delete"),p=(0,a.g2)("el-icon"),m=(0,a.g2)("el-button"),g=(0,a.g2)("el-popconfirm"),v=(0,a.g2)("Plus"),f=(0,a.g2)("el-table"),k=(0,a.g2)("el-dialog"),h=(0,a.gN)("trim");return(0,a.uX)(),(0,a.Wv)(k,{class:"options-center",title:e.$t("status.group"),"destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.show=e),width:"77rem",top:"2vh"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",D,[(0,a.bF)(f,{stripe:"",data:n.state.list,border:"",size:"small",width:"100%",height:"70vh",onCellDblclick:n.handleCellClick},{default:(0,a.k6)((()=>[(0,a.bF)(u,{prop:"Name",label:e.$t("status.groupName"),width:"100"},{default:(0,a.k6)((e=>[e.row.NameEditing?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t,onBlur:t=>n.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,a.uX)(),(0,a.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Name")},(0,l.v_)(e.row.Name||"未知"),9,T))])),_:1},8,["label"]),(0,a.bF)(u,{prop:"Id",label:"Id"},{default:(0,a.k6)((e=>[e.row.IdEditing?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(i,{key:0,autofocus:"",size:"small",modelValue:e.row.Id,"onUpdate:modelValue":t=>e.row.Id=t,onBlur:t=>n.handleEditBlur(e.row,"Id")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,a.uX)(),(0,a.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Id")},(0,l.v_)(e.row.Id),9,G))])),_:1}),(0,a.bF)(u,{prop:"Password",label:e.$t("status.groupPassword")},{default:(0,a.k6)((e=>[e.row.PasswordEditing?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(i,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.Password,"onUpdate:modelValue":t=>e.row.Password=t,onBlur:t=>n.handleEditBlur(e.row,"Password")},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[h]]):((0,a.uX)(),(0,a.CE)("a",{key:1,href:"javascript:;",class:"a-line",onClick:t=>n.handleEdit(e.row,"Password")},[n.globalData.isPhone?((0,a.uX)(),(0,a.CE)("span",j,"***")):((0,a.uX)(),(0,a.CE)("span",Q,(0,l.v_)(e.row.Password.replace(/.{1}/g,"*")),1))],8,z))])),_:1},8,["label"]),(0,a.bF)(u,{prop:"Oper",label:e.$t("status.groupOper"),width:"110",fixed:"right"},{header:(0,a.k6)((()=>[(0,a.Lk)("div",K,[(0,a.Lk)("strong",null,(0,l.v_)(e.$t("status.groupOper")),1),O,(0,a.bF)(d,{name:"GroupSecretKey"})])])),default:(0,a.k6)((t=>[(0,a.Lk)("div",null,[(0,a.bF)(g,{title:e.$t("status.groupDelConfirm"),onConfirm:e=>n.handleDel(t.$index)},{reference:(0,a.k6)((()=>[(0,a.bF)(m,{type:"danger",size:"small"},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1})])),_:1})])),_:2},1032,["title","onConfirm"]),(0,a.bF)(m,{size:"small",onClick:e=>n.handleAdd(t.$index)},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(v)])),_:1})])),_:2},1032,["onClick"])])])),_:1},8,["label"])])),_:1},8,["data","onCellDblclick"])])])),_:1},8,["title","modelValue"])}var q=o(35377),Y={props:["modelValue"],emits:["update:modelValue"],components:{Delete:S.epd,Plus:S.FWt,Select:S.l6P,Sync:q.A},setup(e,{emit:t}){const{t:o}=(0,B.s9)(),l=(0,$.B)(),n=(0,_.Kh)({list:l.value.config.Client.Groups,show:!0});(0,a.wB)((()=>l.value.config.Client.Groups),(()=>{0==n.list.filter((e=>e["__editing"])).length&&(n.list=l.value.config.Client.Groups)})),(0,a.wB)((()=>n.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const s=(e,t)=>{r(e,t.property)},r=(e,t)=>{n.list.forEach((e=>{e["NameEditing"]=!1,e["IdEditing"]=!1,e["PasswordEditing"]=!1})),e[`${t}Editing`]=!0,e["__editing"]=!0},i=(e,t)=>{e[`${t}Editing`]=!1,e["__editing"]=!1;try{e[t]=e[t].trim()}catch(o){}p()},u=e=>{n.list.splice(e,1),p()},d=e=>{n.list.filter((e=>""==e.Id||""==e.Name)).length>0?N.nk.error(o("status.groupValidate")):(n.list.splice(e+1,0,{Name:"",Id:"",Password:""}),p())},c=e=>{const t=n.list.slice(),a=t[e];t[e]=t[0],t[0]=a,(0,I.rd)({name:l.value.config.Client.Name.trim(),groups:t}).then((()=>{N.nk.success(o("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),N.nk.error(o("common.operFail"))}))},p=()=>{(0,I.zp)(n.list).then((()=>{N.nk.success(o("common.oper"))})).catch((e=>{console.log(e),N.nk.error(o("common.operFail"))}))};return{globalData:l,state:n,handleCellClick:s,handleEditBlur:i,handleEdit:r,handleDel:u,handleAdd:d,handleUse:c}}};const Z=(0,L.A)(Y,[["render",R]]);var H=Z,J={components:{ArrowDown:S.yd$,Avatar:S.euF,Groups:H},props:["config"],setup(e){const{t:t}=(0,B.s9)(),o=(0,$.B)(),l=(0,a.EW)((()=>o.value.hasAccess("Group"))),n=(0,_.Kh)({loading:!1,connected:(0,a.EW)((()=>o.value.signin.Connected)),groupName:(0,a.EW)((()=>o.value.config.Client.Group.Name)),groups:(0,a.EW)((()=>o.value.config.Client.Groups)),showGroups:!1}),s=e=>{const t=o.value.config.Client.Groups,a=t.map(((e,t)=>(e.$index=t,e))).filter((t=>t.Id==e))[0].$index,l=t[a];t[a]=t[0],t[0]=l,r(t)},r=e=>{n.loading=!0,(0,I.rd)({Name:o.value.config.Client.Name,Groups:e}).then((()=>{n.loading=!1,n.show=!1,N.nk.success(t("common.oper")),setTimeout((()=>{window.location.reload()}),1e3)})).catch((e=>{console.log(e),n.loading=!1,N.nk.error(t("common.operFail"))}))};return{config:e.config,hasGroup:l,state:n,handleGroupChange:s}}};const M=(0,L.A)(J,[["render",P],["__scopeId","data-v-74bb5e43"]]);var ee=M;const te={key:0,class:"flow-wrap"},oe=["title"],ae=["title"],le=["title"],ne=["title"];function se(e,t,o,n,s,r){const i=(0,a.g2)("Flow",!0);return(0,a.uX)(),(0,a.CE)(a.FK,null,[n.config?((0,a.uX)(),(0,a.CE)("div",te,[(0,a.Lk)("p",null,[(0,a.eW)((0,l.v_)(e.$t("status.flowOnline"))+" ",1),(0,a.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=e=>n.flow.map=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}`},(0,l.v_)(n.flow.overallOnline),9,oe),(0,a.Lk)("a",{href:"javascript:;",onClick:t[1]||(t[1]=e=>n.flow.allmap=!0),title:`${e.$t("status.flowAllServer")}\r\n${e.$t("status.flowOnline")}/${e.$t("status.flowOnline7Day")}/${e.$t("status.flowServer")}`},(0,l.v_)(n.flow.serverOnline),9,ae)]),(0,a.Lk)("p",null,[(0,a.eW)((0,l.v_)(e.$t("status.flowUpload"))+" ",1),(0,a.Lk)("a",{href:"javascript:;",onClick:t[2]||(t[2]=e=>n.flow.count=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllSend")}`},(0,l.v_)(n.flow.overallSendtSpeed),9,le)]),(0,a.Lk)("p",null,[(0,a.eW)((0,l.v_)(e.$t("status.flowDownload"))+" ",1),(0,a.Lk)("a",{href:"javascript:;",onClick:t[3]||(t[3]=e=>n.flow.count=!0),title:`${e.$t("status.flowThisServer")}\r\n${e.$t("status.flowAllReceive")}`},(0,l.v_)(n.flow.overallReceiveSpeed),9,ne)])])):(0,a.Q3)("",!0),(0,a.bF)(i,{config:n.config,title:"服务器"},null,8,["config"])],64)}var re=o(1257),ie=o(66046),ue={props:["config"],components:{Flow:re.A},setup(e){const{flow:t}=(0,ie.Y)();return{config:e.config,flow:t}}};const de=(0,L.A)(ue,[["render",se],["__scopeId","data-v-6d5a2f7a"]]);var ce=de;const pe=["title"],me={key:0,class:"progress"},ge={key:1,class:"progress"};function ve(e,t,o,n,s,r){const i=(0,a.g2)("Loading"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("Download"),c=(0,a.g2)("CircleCheck");return(0,a.uX)(),(0,a.CE)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>n.handleUpdate&&n.handleUpdate(...e)),class:(0,l.C4)(["download",n.updateColor()]),title:n.updateText()},[(0,a.Lk)("span",null,(0,l.v_)(n.state.version),1),n.updaterServer.Version?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[1==n.updaterServer.Status?((0,a.uX)(),(0,a.Wv)(u,{key:0,size:"14",class:"loading"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1})):2==n.updaterServer.Status?((0,a.uX)(),(0,a.Wv)(u,{key:1,size:"14"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1})):3==n.updaterServer.Status||5==n.updaterServer.Status?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.bF)(u,{size:"14",class:"loading"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),0==n.updaterServer.Length?((0,a.uX)(),(0,a.CE)("span",me,"0%")):((0,a.uX)(),(0,a.CE)("span",ge,(0,l.v_)(parseInt(n.updaterServer.Current/n.updaterServer.Length*100))+"%",1))],64)):6==n.updaterServer.Status?((0,a.uX)(),(0,a.Wv)(u,{key:3,size:"14",class:"yellow"},{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1})):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.Wv)(u,{key:1,size:"14"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1}))],10,pe)}var fe=o(12933),ke=o(80920),he={components:{Promotion:S.Yk4,Download:S.f5X,Loading:S.Rhj,CircleCheck:S.rW7,ServerFlow:re.A},props:["config"],setup(e){const{t:t}=(0,B.s9)(),o=(0,$.B)(),l=(0,a.EW)((()=>o.value.hasAccess("UpdateServer"))),n=(0,_.KR)({Version:"",Status:0,Length:0,Current:0,Msg:[],DateTime:""}),s=(0,_.Kh)({show:!1,loading:!1,connected:(0,a.EW)((()=>o.value.signin.Connected)),version:(0,a.EW)((()=>o.value.signin.Version)),timer:0}),r=()=>{clearTimeout(s.timer),(0,ke.BJ)().then((e=>{n.value.Version=e.Version,n.value.Status=e.Status,n.value.Length=e.Length,n.value.Current=e.Current,n.value.Status>2&&n.value.Status<6&&(s.timer=setTimeout((()=>{r()}),1e3))})).catch((()=>{s.timer=setTimeout((()=>{r()}),1e3)}))},i=()=>n.value.Version?n.value.Status<=2?s.version!=n.value.Version?`${t("status.serverNotNew")}(${n.value.Version})`:`${t("status.serverNew")}`:{3:t("status.serverDownloading"),4:t("status.serverDownloaded"),5:t("status.serverUnZipIng"),6:t("status.serverUnZip")}[n.value.Status]:t("status.serverNoUpdate"),u=()=>s.version!=n.value.Version?"yellow":"green",d=()=>{e.config&&l.value&&([0,1,3,5].indexOf(n.value.Status)>=0?N.nk.error(t("common.operating")):6!=n.value.Status?2==n.value.Status&&fe.s.confirm(t("status.serverConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,ke.y2)(n.value.Version||o.value.signin.Version).then((()=>{setTimeout((()=>{r()}),1e3)}))})).catch((()=>{})):fe.s.confirm(t("status.serverCloseConfirm"),t("common.tips"),{confirmButtonText:t("common.confirm"),cancelButtonText:t("common.cancel"),type:"warning"}).then((()=>{(0,ke.aP)()})).catch((()=>{})))};return(0,a.sV)((()=>{r()})),{config:e.config,state:s,updaterServer:n,handleUpdate:d,updateText:i,updateColor:u}}};const we=(0,L.A)(he,[["render",ve],["__scopeId","data-v-3886bb74"]]);var be=we,Ce={components:{Groups:ee,Flow:ce,ServerVersion:be},props:["config"],setup(e){const t=(0,$.B)(),o=(0,a.EW)((()=>t.value.hasAccess("Flow"))),l=(0,_.Kh)({show:!1,loading:!1});return{config:e.config,hasFlow:o,state:l}}};const ye=(0,L.A)(Ce,[["render",U],["__scopeId","data-v-b198f5e0"]]);var _e=ye;const Fe={key:0,class:"status-export-wrap"},Ve=["title"],$e={key:0},xe={class:"port-wrap"},Se={class:"text"},Ee={class:"body"},Le={class:"card-header"},Ae={class:"flex flex-nowrap"},We={style:{width:"11rem"}},Xe={class:"flex flex-nowrap mgt-1"},Ue={style:{width:"11rem"}},Pe={class:"flex flex-nowrap mgt-1"},Ie={style:{width:"11rem"}},Ne={class:"port-wrap"},Be={class:"port-wrap"},De={style:{"margin-top":"1rem"}};function Te(e,t,o,n,s,r){const i=(0,a.g2)("Share"),u=(0,a.g2)("el-icon"),d=(0,a.g2)("el-checkbox"),c=(0,a.g2)("el-col"),p=(0,a.g2)("el-input"),m=(0,a.g2)("el-row"),g=(0,a.g2)("Access"),v=(0,a.g2)("el-card"),f=(0,a.g2)("el-button"),k=(0,a.g2)("el-dialog"),h=(0,a.gN)("trim");return n.config&&n.hasExport?((0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("a",{href:"javascript:;",title:e.$t("status.export"),onClick:t[0]||(t[0]=e=>n.state.show=!0)},[(0,a.bF)(u,{size:"16"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),n.globalData.isPc?((0,a.uX)(),(0,a.CE)("span",$e,(0,l.v_)(e.$t("status.export")),1)):(0,a.Q3)("",!0)],8,Ve),(0,a.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[12]||(t[12]=e=>n.state.show=e),center:"",width:"580",top:"1vh"},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{plain:"",onClick:t[11]||(t[11]=e=>n.state.show=!1),loading:n.state.loading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("common.cancel")),1)])),_:1},8,["loading"]),(0,a.bF)(f,{type:"default",plain:"",onClick:n.handleExport,loading:n.state.loading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportDownload")),1)])),_:1},8,["onClick","loading"]),(0,a.bF)(f,{type:"info",plain:"",onClick:n.handleCopy,loading:n.state.loading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick","loading"]),(0,a.bF)(f,{type:"success",plain:"",onClick:n.handleSave,loading:n.state.loading},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportSave")),1)])),_:1},8,["onClick","loading"])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",xe,[(0,a.Lk)("div",Se,(0,l.v_)(e.$t("status.exportText")),1),(0,a.Lk)("div",Ee,[(0,a.bF)(v,{shadow:"never"},{header:(0,a.k6)((()=>[(0,a.Lk)("div",Le,[(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(d,{disabled:n.onlyNode,modelValue:n.state.single,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.single=e),label:e.$t("status.exportSingle")},null,8,["disabled","modelValue","label"])])),_:1}),(0,a.bF)(c,{span:12},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ae,[(0,a.Lk)("span",We,(0,l.v_)(e.$t("status.exportName"))+" : ",1),(0,a.bo)((0,a.bF)(p,{disabled:!n.state.single,modelValue:n.state.name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.name=e),maxlength:"32","show-word-limit":""},null,8,["disabled","modelValue"]),[[h]])])])),_:1})])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{span:12},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Xe,[(0,a.Lk)("span",Ue,(0,l.v_)(e.$t("status.exportWebport"))+" : ",1),(0,a.bo)((0,a.bF)(p,{disabled:n.onlyNode,modelValue:n.state.webport,"onUpdate:modelValue":t[3]||(t[3]=e=>n.state.webport=e)},null,8,["disabled","modelValue"]),[[h]])])])),_:1}),(0,a.bF)(c,{span:12},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Pe,[(0,a.Lk)("span",Ie,(0,l.v_)(e.$t("status.exportApiPassword"))+" : ",1),(0,a.bo)((0,a.bF)(p,{type:"password","show-password":"",disabled:n.onlyNode,modelValue:n.state.apipassword,"onUpdate:modelValue":t[4]||(t[4]=e=>n.state.apipassword=e),maxlength:"36","show-word-limit":""},null,8,["disabled","modelValue"]),[[h]])])])),_:1})])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.relay,"onUpdate:modelValue":t[5]||(t[5]=e=>n.state.relay=e),label:e.$t("status.exportRelay")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.updater,"onUpdate:modelValue":t[6]||(t[6]=e=>n.state.updater=e),label:e.$t("status.exportUpdater")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.group,"onUpdate:modelValue":t[7]||(t[7]=e=>n.state.group=e),label:e.$t("status.exportGroup")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.server,"onUpdate:modelValue":t[8]||(t[8]=e=>n.state.server=e),label:e.$t("status.exportServer")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.super,"onUpdate:modelValue":t[9]||(t[9]=e=>n.state.super=e),label:e.$t("status.exportSuper")},null,8,["modelValue","label"])])),_:1}),(0,a.bF)(c,{xs:12,sm:8},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:n.state.tunnel,"onUpdate:modelValue":t[10]||(t[10]=e=>n.state.tunnel=e),label:e.$t("status.exportTunnel")},null,8,["modelValue","label"])])),_:1})])),_:1})])])])),default:(0,a.k6)((()=>[(0,a.bF)(g,{ref:"accessDom",machineid:n.machineId,height:30},null,8,["machineid"])])),_:1})])])])),_:1},8,["title","modelValue"]),(0,a.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.showCopy,"onUpdate:modelValue":t[14]||(t[14]=e=>n.state.showCopy=e),center:"",width:"580",top:"1vh"},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{plain:"",onClick:n.copyToClipboard},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Ne,[(0,a.bo)((0,a.bF)(p,{modelValue:n.state.copyContent,"onUpdate:modelValue":t[13]||(t[13]=e=>n.state.copyContent=e),type:"textarea",rows:10,resize:"none",readonly:""},null,8,["modelValue"]),[[h]])])])),_:1},8,["title","modelValue"]),(0,a.bF)(k,{class:"options-center",title:e.$t("status.export"),"destroy-on-close":"",modelValue:n.state.showSave,"onUpdate:modelValue":t[17]||(t[17]=e=>n.state.showSave=e),center:"",width:"300",top:"1vh"},{footer:(0,a.k6)((()=>[(0,a.bF)(f,{plain:"",onClick:n.copySaveToClipboard},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("status.exportCopy")),1)])),_:1},8,["onClick"])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Be,[(0,a.Lk)("div",null,[(0,a.bo)((0,a.bF)(p,{modelValue:n.state.saveServer,"onUpdate:modelValue":t[15]||(t[15]=e=>n.state.saveServer=e),readonly:""},null,8,["modelValue"]),[[h]])]),(0,a.Lk)("div",De,[(0,a.bo)((0,a.bF)(p,{modelValue:n.state.saveContent,"onUpdate:modelValue":t[16]||(t[16]=e=>n.state.saveContent=e),readonly:""},null,8,["modelValue"]),[[h]])])])])),_:1},8,["title","modelValue"])])):(0,a.Q3)("",!0)}var Ge=o(88835),ze=o(87586),je={components:{Share:S.SYj,Access:ze.A},props:["config"],setup(e){const{t:t}=(0,B.s9)(),o=(0,$.B)(),l=(0,a.EW)((()=>o.value.hasAccess("Export"))),n=(0,a.EW)((()=>o.value.config.Client.OnlyNode)),s=(0,a.EW)((()=>o.value.config.Client.Id)),r=(0,_.Kh)({show:!1,loading:!1,single:!0,name:"",apipassword:n.value?o.value.config.Client.CApi.ApiPassword:"",webport:o.value.config.Client.CApi.WebPort,relay:!0,updater:!0,server:!0,super:!1,group:!0,tunnel:!0,copyContent:"",showCopy:!1,saveServer:o.value.config.Client.Server.Host,saveContent:"",showSave:!1}),i=(0,_.KR)(null),u=()=>{if(!l.value)return void N.nk.success("无权限");const e=i.value.getValue(),o={access:e[0],fullAccess:e[1],single:r.single,name:r.name,apipassword:r.apipassword,webport:+r.webport,relay:r.relay,updater:r.updater,server:r.server,super:r.super,group:r.group,tunnel:r.tunnel};if(o.single){if(!o.name)return void N.nk.error(t("status.exportNamePlease"))}else o.name="";if(o.apipassword){if(!(!o.webport||isNaN(o.webport)||o.webport<=0||o.webport>65535))return o;N.nk.error(t("status.exportWebportPlease"))}else N.nk.error(t("status.exportApiPasswordPlease"))},d=()=>{const e=document.createElement("a");r.single?e.download=`client-node-export-${r.name}.zip`:e.download="client-node-export.zip",e.href="/client-node-export.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)},c=()=>{const e=u();e&&(r.loading=!0,(0,Ge.ql)(e).then((e=>{r.loading=!1,e?(r.show=!1,N.nk.success(t("common.oper")),r.saveContent=e,r.showSave=!0):N.nk.error(t("common.operFail"))})).catch((()=>{N.nk.error(t("common.operFail")),r.loading=!1})))},p=async()=>{try{return await navigator.clipboard.writeText(`在初始化linker客户端时，填写服务器和密钥，导入配置\n服务器: ${r.saveServer}\n密钥: ${r.saveContent}`),N.nk.success(t("common.oper")),!0}catch(e){return N.nk.error(t("common.operFail")),!1}},m=()=>{const e=u();e&&(r.loading=!0,(0,Ge.P$)(e).then((()=>{r.loading=!1,r.show=!1,N.nk.success(t("common.oper")),d()})).catch((()=>{N.nk.error(t("common.operFail")),r.loading=!1})))},g=()=>{const e=u();e&&(r.loading=!0,(0,Ge.om)(e).then((e=>{r.loading=!1,r.show=!1,N.nk.success(t("common.oper")),r.copyContent=e,r.showCopy=!0})).catch((()=>{N.nk.error(t("common.operFail")),r.loading=!1})))},v=async()=>{try{return await navigator.clipboard.writeText(r.copyContent),N.nk.success(t("common.oper")),!0}catch(e){return N.nk.error(t("common.operFail")),!1}};return{globalData:o,config:e.config,onlyNode:n,hasExport:l,machineId:s,state:r,accessDom:i,handleSave:c,handleExport:m,handleCopy:g,copyToClipboard:v,copySaveToClipboard:p}}};const Qe=(0,L.A)(je,[["render",Te],["__scopeId","data-v-74a0500e"]]);var Ke=Qe,Oe=o(31480),Re={components:{Api:W,Server:_e,Export:Ke,UpdaterBtn:Oe.A},props:["config"],setup(e){const t=(0,$.B)(),o=(0,a.EW)((()=>t.value.self)),l=(0,_.Kh)({showPay:!1});return{globalData:t,state:l,config:e.config,self:o}}};const qe=(0,L.A)(Re,[["render",y],["__scopeId","data-v-5a37b5dd"]]);var Ye=qe},7199:function(e,t,o){o.d(t,{A:function(){return g}});var a=o(56768);const l=e=>((0,a.Qi)("data-v-4b6a124c"),e=e(),(0,a.jt)(),e),n={key:0,class:"image"},s=l((()=>(0,a.Lk)("input",{type:"file",id:"file-input"},null,-1)));function r(e,t,o,l,r,i){const u=(0,a.g2)("PictureRounded"),d=(0,a.g2)("el-icon");return l.globalData.isPc?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>l.handleBg&&l.handleBg(...e))},[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(u)])),_:1})]),s])):(0,a.Q3)("",!0)}var i=o(53830),u=o(57477),d=o(12933),c={components:{PictureRounded:u.syp},props:["name"],setup(e){const t=(0,i.B)(),o=`bg-${e.name}`,l=()=>{localStorage.getItem(o)?d.s.confirm("清除背景？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{s()})).catch((()=>{})):document.getElementById("file-input").click()},n=e=>{const t=e.target.files[0];if(t)try{const e=new FileReader;e.onload=function(e){s(e.target.result)},e.readAsDataURL(t)}catch(o){}e.target.value=""},s=e=>{e?(document.body.className="sunny",localStorage.setItem(o,e),document.body.style=`background-image:url(${e})`):(document.body.className="",document.body.style="",localStorage.setItem(o,""))};return(0,a.sV)((()=>{const e=document.getElementById("file-input");e&&e.addEventListener("change",n),s(localStorage.getItem(o))})),{globalData:t,handleBg:l}}},p=o(71241);const m=(0,p.A)(c,[["render",r],["__scopeId","data-v-4b6a124c"]]);var g=m}}]);